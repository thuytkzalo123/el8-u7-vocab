<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>B√†i t·∫≠p Ti·∫øng Anh: Question 367-428</title>
    <style>
        :root {
            --primary-blue: #e8f0fe;
            --dark-blue: #1a73e8;
            --border-color: #dadce0;
            --correct-green: #1e8e3e;
            --wrong-red: #d93025;
            --trans-color: #5f6368;
            --hint-bg: #fff8e1;
            --hint-text: #f57f17;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: auto;
            overflow: auto; 
        }

        /* === HEADER === */
        .header {
            background: white;
            padding: 10px 20px;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 101;
            flex-shrink: 0;
        }

        .header-top {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #5f6368;
            padding: 5px;
        }

        .header-title {
            margin: 0;
            font-size: 1.2em;
            color: #202124;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .progress-container {
            width: 100%;
            height: 6px;
            background-color: #eee;
            border-radius: 4px;
            margin-top: 10px;
        }

        #progress-bar {
            width: 0%;
            height: 100%;
            background-color: var(--dark-blue);
            border-radius: 4px;
            transition: width 0.4s ease;
        }

        /* === MAIN LAYOUT === */
        .main-container {
            display: flex;
            flex: 1;
            padding: 20px;
            gap: 25px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
            overflow: visible;
        }

        /* === SIDEBAR === */
        .sidebar {
            width: 280px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            height: calc(100vh - 100px);
            overflow-y: auto;
            flex-shrink: 0;
            transition: transform 0.3s ease;
            position: sticky;
            top: 80px;
            z-index: 1000;
        }

        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .stats-box {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #eee;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.95em;
            color: #333;
        }
        
        .stat-value {
            font-weight: bold;
            color: var(--dark-blue);
        }

        .nav-container {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .question-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
        }

        .q-num {
            aspect-ratio: 1;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.9em;
            background: #fff;
        }

        .q-num.done-correct { background-color: #e6f4ea; border-color: var(--correct-green); color: var(--correct-green); font-weight: bold; }
        .q-num.done-wrong { background-color: #fce8e6; border-color: var(--wrong-red); color: var(--wrong-red); font-weight: bold; }

        .btn-submit {
            width: 100%;
            padding: 12px;
            background-color: var(--dark-blue);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1em;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* === QUIZ AREA === */
        .quiz-area {
            flex: 1;
            padding-bottom: 20px;
        }

        .question-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }

        .question-text {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 12px;
            line-height: 1.5;
            color: #202124;
        }

        .btn-hint-toggle {
            align-self: flex-start;
            background-color: white;
            border: 1px solid #ffb74d;
            color: #f57f17;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 15px;
        }

        .hint-content {
            display: none;
            background-color: #fff3e0;
            border-left: 4px solid #ffb74d;
            padding: 10px 15px;
            margin-bottom: 15px;
            border-radius: 4px;
            font-size: 0.95em;
            color: #e65100;
        }
        .hint-content.show { display: block; animation: fadeIn 0.3s; }

        .options-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .option-btn {
            padding: 14px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: white;
            text-align: left;
            cursor: pointer;
            font-size: 1em;
            display: flex;
            flex-direction: column;
            line-height: 1.4;
            transition: background-color 0.2s;
        }

        .option-btn:active { background-color: #f1f3f4; }
        .option-btn.disabled { cursor: default; opacity: 0.9; }
        .option-btn.correct { background-color: #e6f4ea; border-color: var(--correct-green); color: var(--correct-green); }
        .option-btn.wrong { background-color: #fce8e6; border-color: var(--wrong-red); color: var(--wrong-red); }

        .btn-trans-toggle {
            margin-top: 20px;
            align-self: flex-start;
            background: #f1f3f4;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            color: #555;
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
        }
        .btn-trans-toggle:disabled { opacity: 0.5; background-color: #eee; }

        .trans-text {
            display: none;
            color: var(--trans-color);
            font-style: italic;
            font-size: 0.95em;
            margin-top: 5px;
            font-weight: normal;
            border-top: 1px dashed #eee;
            padding-top: 4px;
        }
        .trans-text.show { display: block; animation: fadeIn 0.3s; }

        .explanation-box {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            background-color: #fffde7;
            border-left: 4px solid #fbc02d;
            display: none;
            font-size: 0.95em;
        }

        /* === MODAL === */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 16px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: zoomIn 0.3s;
        }
        .modal-score { font-size: 3.5em; font-weight: bold; color: var(--dark-blue); margin: 10px 0; }
        .modal-details { margin: 20px 0; background: #f8f9fa; padding: 15px; border-radius: 8px; }
        .modal-btn { padding: 12px 30px; background: var(--dark-blue); color: white; border: none; border-radius: 8px; font-size: 1.1em; cursor: pointer; width: 100%; }

        /* === RESPONSIVE FIXES === */
        @media (max-width: 768px) {
            .menu-toggle { display: block; }
            .main-container { padding: 10px; display: block; height: auto; overflow: visible; }
            .sidebar { position: fixed; top: 0; left: 0; width: 80%; max-width: 300px; height: 100%; margin: 0; border-radius: 0; border: none; transform: translateX(-100%); box-shadow: 2px 0 10px rgba(0,0,0,0.2); }
            .sidebar.active { transform: translateX(0); }
            .sidebar-overlay.active { display: block; }
            .quiz-area { padding: 0; height: auto; overflow: visible; margin-bottom: 50px; }
            .question-card { padding: 15px; margin-bottom: 15px; }
            .options-list { grid-template-columns: 1fr; }
            .header-title { font-size: 1em; }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes zoomIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>

    <div class="header">
        <div class="header-top">
            <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
            <h2 class="header-title">B√†i t·∫≠p Ti·∫øng Anh: Question 367-428</h2>
        </div>
        <div class="progress-container">
            <div id="progress-bar"></div>
        </div>
    </div>

    <div class="main-container">
        <div class="sidebar-overlay" id="sidebar-overlay" onclick="toggleSidebar()"></div>

        <div class="sidebar" id="sidebar">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3 style="margin:0 0 10px 0; color:#444">Th·ªëng k√™</h3>
                <span onclick="toggleSidebar()" style="cursor:pointer; font-size:1.5em; color:#888; padding: 5px;" class="mobile-only">‚úï</span>
            </div>
            
            <div class="stats-box">
                <div class="stat-item">
                    <span>S·ªë c√¢u ƒë√∫ng:</span>
                    <span class="stat-value"><span id="stat-correct">0</span>/<span id="stat-total">62</span></span>
                </div>
                <div class="stat-item">
                    <span>ƒêi·ªÉm s·ªë:</span>
                    <span class="stat-value"><span id="stat-score">0.0</span>/10</span>
                </div>
            </div>

            <div class="nav-container">
                <h4 style="margin:0 0 10px 0;">C√¢u h·ªèi</h4>
                <div class="question-grid" id="q-nav"></div>
            </div>

            <button class="btn-submit" onclick="submitQuiz()">N·ªôp b√†i</button>
        </div>

        <div class="quiz-area" id="quiz-container"></div>
    </div>

    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <h2 style="color: #444; margin-top:0">K·∫øt Qu·∫£</h2>
            <div>ƒêi·ªÉm s·ªë c·ªßa b·∫°n</div>
            <div class="modal-score" id="final-score">0.0</div>
            
            <div class="modal-details">
                <p>S·ªë c√¢u ƒë√∫ng: <b id="final-correct">0</b> / <span id="final-total">62</span></p>
                <p>X·∫øp lo·∫°i: <b id="final-rank" style="color: #e65100">---</b></p>
            </div>
            
            <button class="modal-btn" onclick="closeModal()">Xem l·∫°i b√†i</button>
        </div>
    </div>

    <script>
        const quizData = [
            // PART 1: General (Question 5-16)
            { q: "I live in a _________ street which is full of people and vehicles moving around all day.", qVi: "T√¥i s·ªëng tr√™n m·ªôt con ph·ªë ______ ƒë·∫ßy ng∆∞·ªùi v√† xe c·ªô ƒëi l·∫°i c·∫£ ng√†y.", key: ["full of people", "street"], opts: ["empty", "calm", "bustling", "quite"], optsVi: ["tr·ªëng r·ªóng", "b√¨nh tƒ©nh", "nh·ªôn nh·ªãp", "kh√°/y√™n tƒ©nh (sai ch√≠nh t·∫£)"], correct: 2, exp: "ƒê√¥ng ƒë√∫c, nh·ªôn nh·ªãp -> <b>bustling</b>." },
            { q: "This city has one of the most _________ underground rail networks in the world.", qVi: "Th√†nh ph·ªë n√†y c√≥ m·ªôt trong nh·ªØng m·∫°ng l∆∞·ªõi ƒë∆∞·ªùng s·∫Øt ng·∫ßm ______ nh·∫•t th·∫ø gi·ªõi.", key: ["rail networks", "adjective"], opts: ["efficient", "fashionable", "modern", "fascinated"], optsVi: ["hi·ªáu qu·∫£", "th·ªùi trang", "hi·ªán ƒë·∫°i", "b·ªã m√™ ho·∫∑c"], correct: 0, exp: "H·ªá th·ªëng giao th√¥ng ho·∫°t ƒë·ªông t·ªët -> <b>efficient</b> (hi·ªáu qu·∫£). (Modern c≈©ng h·ª£p l√Ω nh∆∞ng efficient th∆∞·ªùng d√πng cho m·∫°ng l∆∞·ªõi v·∫≠n h√†nh)." },
            { q: "Students try to avoid _________ like phones and loud noises while studying.", qVi: "H·ªçc sinh c·ªë g·∫Øng tr√°nh nh·ªØng ______ nh∆∞ ƒëi·ªán tho·∫°i v√† ti·∫øng ·ªìn l·ªõn khi h·ªçc.", key: ["avoid", "phones"], opts: ["discomforts", "recreations", "distractions", "interactions"], optsVi: ["s·ª± kh√≥ ch·ªãu", "gi·∫£i tr√≠", "s·ª± xao nh√£ng", "t∆∞∆°ng t√°c"], correct: 2, exp: "Nh·ªØng th·ª© g√¢y m·∫•t t·∫≠p trung -> <b>distractions</b>." },
            { q: "I think we should have _________ living , both physical and mental health.", qVi: "T√¥i nghƒ© ch√∫ng ta n√™n c√≥ l·ªëi s·ªëng ______, c·∫£ v·ªÅ s·ª©c kh·ªèe th·ªÉ ch·∫•t v√† tinh th·∫ßn.", key: ["living", "adjective"], opts: ["healthily", "healthy", "unhealthy", "health"], optsVi: ["m·ªôt c√°ch l√†nh m·∫°nh", "l√†nh m·∫°nh", "kh√¥ng l√†nh m·∫°nh", "s·ª©c kh·ªèe"], correct: 1, exp: "L·ªëi s·ªëng l√†nh m·∫°nh -> <b>healthy</b> living." },
            { q: "_________ is a common issue in large cities.", qVi: "______ l√† v·∫•n ƒë·ªÅ ph·ªï bi·∫øn ·ªü c√°c th√†nh ph·ªë l·ªõn.", key: ["issue", "cities"], opts: ["Traffic safety", "Traffic flow", "Traffic light", "Traffic congestion"], optsVi: ["An to√†n giao th√¥ng", "L∆∞u l∆∞·ª£ng giao th√¥ng", "ƒê√®n giao th√¥ng", "T·∫Øc ngh·∫Ωn giao th√¥ng"], correct: 3, exp: "V·∫•n ƒë·ªÅ giao th√¥ng -> <b>Traffic congestion</b>." },
            { q: "Many families prefer to live ___ a quiet suburb.", qVi: "Nhi·ªÅu gia ƒë√¨nh th√≠ch s·ªëng ___ m·ªôt v√πng ngo·∫°i √¥ y√™n tƒ©nh.", key: ["live", "suburb"], opts: ["at", "on", "in", "up"], optsVi: ["...", "...", "trong/·ªü", "..."], correct: 2, exp: "S·ªëng ·ªü ƒë√¢u -> live <b>in</b> a suburb." },
            { q: "Unfortunately, I _________ a cold last week.", qVi: "Th·∫≠t kh√¥ng may, t√¥i ƒë√£ ______ c·∫£m l·∫°nh v√†o tu·∫ßn tr∆∞·ªõc.", key: ["cold", "last week"], opts: ["ran out of", "handed down", "came down with", "gave up"], optsVi: ["h·∫øt", "truy·ªÅn l·∫°i", "b·ªã b·ªánh", "t·ª´ b·ªè"], correct: 2, exp: "B·ªã c·∫£m l·∫°nh -> <b>came down with</b> a cold." },
            { q: "Air pollution, together with littering, is causing _________ problems in our large, industrial cities today.", qVi: "√î nhi·ªÖm kh√¥ng kh√≠, c√πng v·ªõi vi·ªác x·∫£ r√°c, ƒëang g√¢y ra ______ v·∫•n ƒë·ªÅ ·ªü c√°c th√†nh ph·ªë c√¥ng nghi·ªáp l·ªõn ng√†y nay.", key: ["problems", "countable"], opts: ["much", "many", "a", "little"], optsVi: ["nhi·ªÅu (kh√¥ng ƒë·∫øm ƒë∆∞·ª£c)", "nhi·ªÅu (ƒë·∫øm ƒë∆∞·ª£c)", "m·ªôt", "√≠t"], correct: 1, exp: "'Problems' ƒë·∫øm ƒë∆∞·ª£c s·ªë nhi·ªÅu -> <b>many</b>." },
            { q: "Kevin _________ for his final exams in his bedroom at 2 p.m. yesterday.", qVi: "Kevin ______ cho k·ª≥ thi cu·ªëi k·ª≥ trong ph√≤ng ng·ªß l√∫c 2 gi·ªù chi·ªÅu h√¥m qua.", key: ["at 2 p.m. yesterday"], opts: ["was studying", "is studying", "Studied", "studies"], optsVi: ["ƒëang h·ªçc (QK)", "ƒëang h·ªçc (HT)", "ƒë√£ h·ªçc", "h·ªçc"], correct: 0, exp: "H√†nh ƒë·ªông ƒëang x·∫£y ra t·∫°i th·ªùi ƒëi·ªÉm c·ª• th·ªÉ trong qu√° kh·ª© -> <b>was studying</b>." },
            { q: "I wish my friends spent less time _________ computer games and more time outdoors.", qVi: "T√¥i ∆∞·ªõc b·∫°n b√® t√¥i d√†nh √≠t th·ªùi gian ______ tr√≤ ch∆°i m√°y t√≠nh v√† nhi·ªÅu th·ªùi gian h∆°n ·ªü ngo√†i tr·ªùi.", key: ["spent time", "verb"], opts: ["play", "to play", "played", "playing"], optsVi: ["...", "...", "...", "ch∆°i"], correct: 3, exp: "Spend time + V-ing -> <b>playing</b>." },
            { q: "If you want to pass the driving test, you _________ study harder and practise more regularly.", qVi: "N·∫øu b·∫°n mu·ªën v∆∞·ª£t qua b√†i ki·ªÉm tra l√°i xe, b·∫°n ______ h·ªçc chƒÉm ch·ªâ h∆°n v√† th·ª±c h√†nh th∆∞·ªùng xuy√™n h∆°n.", key: ["want to pass", "must"], opts: ["might", "must", "may", "will"], optsVi: ["c√≥ l·∫Ω", "ph·∫£i", "c√≥ l·∫Ω", "s·∫Ω"], correct: 1, exp: "Ch·ªâ s·ª± b·∫Øt bu·ªôc ƒë·ªÉ ƒë·∫°t k·∫øt qu·∫£ -> <b>must</b>." },
            { q: "John, together with his parents, have gone to London on holiday.", qVi: "John, c√πng v·ªõi b·ªë m·∫π, ƒë√£ ƒëi ngh·ªâ ·ªü London.", key: ["Subject-Verb Agreement", "Correction"], opts: ["have gone", "gone", "has gone", "go"], optsVi: ["...", "...", "...", "..."], correct: 2, exp: "Ch·ªß ng·ªØ ch√≠nh l√† 'John' (s·ªë √≠t) -> ƒë·ªông t·ª´ chia s·ªë √≠t: <b>has gone</b>. (C√¢u g·ªëc trong ƒë·ªÅ c√≥ l·ªói ng·ªØ ph√°p ·ªü t·ª´ 'have', ƒë√°p √°n s·ª≠a l·ªói)." },

            // PART 2 (Image 1)
            { q: "It‚Äôs important to ________ local traditions and cultural heritage for future generations.", qVi: "ƒêi·ªÅu quan tr·ªçng l√† ph·∫£i ______ truy·ªÅn th·ªëng ƒë·ªãa ph∆∞∆°ng v√† di s·∫£n vƒÉn h√≥a cho c√°c th·∫ø h·ªá t∆∞∆°ng lai.", key: ["traditions", "future"], opts: ["preserve", "prevent", "prepare", "present"], optsVi: ["b·∫£o t·ªìn", "ngƒÉn ch·∫∑n", "chu·∫©n b·ªã", "tr√¨nh b√†y"], correct: 0, exp: "G√¨n gi·ªØ vƒÉn h√≥a -> <b>preserve</b>." },
            { q: "You ________ talk to your parents if you are in trouble or need some help.", qVi: "B·∫°n ______ n√≥i chuy·ªán v·ªõi cha m·∫π n·∫øu b·∫°n g·∫∑p r·∫Øc r·ªëi ho·∫∑c c·∫ßn gi√∫p ƒë·ª°.", key: ["advice", "trouble"], opts: ["may", "might", "can", "should"], optsVi: ["...", "...", "...", "n√™n"], correct: 3, exp: "L·ªùi khuy√™n -> <b>should</b>." },
            { q: "Unfortunately, I‚Äôve ________ a cold, so I won‚Äôt be able to attend the party tonight.", qVi: "Th·∫≠t kh√¥ng may, t√¥i ƒë√£ ______ c·∫£m l·∫°nh, v√¨ v·∫≠y t√¥i s·∫Ω kh√¥ng th·ªÉ tham d·ª± b·ªØa ti·ªác t·ªëi nay.", key: ["cold", "illness"], opts: ["let down with", "cut down on", "come down with", "run out of"], optsVi: ["...", "c·∫Øt gi·∫£m", "b·ªã b·ªánh", "h·∫øt"], correct: 2, exp: "B·ªã c·∫£m -> <b>come down with</b>." },
            { q: "She ________ her cousin since she ________ school.", qVi: "C√¥ ·∫•y ______ em h·ªç c·ªßa m√¨nh k·ªÉ t·ª´ khi c√¥ ·∫•y ______ tr∆∞·ªùng.", key: ["since", "tense"], opts: ["haven‚Äôt met - left", "hasn‚Äôt met - left", "didn‚Äôt meet - left", "doesn‚Äôt meet - leaves"], optsVi: ["...", "ch∆∞a g·∫∑p (HTHT) - r·ªùi (QKƒê)", "...", "..."], correct: 1, exp: "M·ªánh ƒë·ªÅ ch√≠nh HTHT, m·ªánh ƒë·ªÅ Since QKƒê. Ch·ªß ng·ªØ 'She' s·ªë √≠t -> <b>hasn't met</b>." },
            { q: "The town council decided ________ down the building as it was unsafe.", qVi: "H·ªôi ƒë·ªìng th·ªã tr·∫•n quy·∫øt ƒë·ªãnh ______ t√≤a nh√† v√¨ n√≥ kh√¥ng an to√†n.", key: ["decided", "verb"], opts: ["to pull", "pulling", "pulled", "pull"], optsVi: ["k√©o (nguy√™n th·ªÉ)", "...", "...", "..."], correct: 0, exp: "Decide + to V -> <b>to pull</b>." },
            { q: "Would you like ________ milk in your tea?", qVi: "B·∫°n c√≥ mu·ªën ______ s·ªØa trong tr√† c·ªßa m√¨nh kh√¥ng?", key: ["offer", "milk"], opts: ["many", "few", "some", "any"], optsVi: ["...", "...", "m·ªôt √≠t (l·ªùi m·ªùi)", "b·∫•t k·ª≥"], correct: 2, exp: "L·ªùi m·ªùi l·ªãch s·ª± d√πng <b>some</b>." },
            { q: "This city looks like a ________ jungle with ugly buildings and almost no parks.", qVi: "Th√†nh ph·ªë n√†y tr√¥ng gi·ªëng nh∆∞ m·ªôt khu r·ª´ng ______ v·ªõi nh·ªØng t√≤a nh√† x·∫•u x√≠ v√† g·∫ßn nh∆∞ kh√¥ng c√≥ c√¥ng vi√™n.", key: ["ugly buildings", "jungle"], opts: ["green", "loveable", "tropical", "concrete"], optsVi: ["xanh", "ƒë√°ng y√™u", "nhi·ªát ƒë·ªõi", "b√™ t√¥ng"], correct: 3, exp: "Th√†nh ng·ªØ: <b>concrete</b> jungle." },
            { q: "A quiet and organized workspace can help reduce ________ and improve concentration.", qVi: "M·ªôt kh√¥ng gian l√†m vi·ªác y√™n tƒ©nh v√† ngƒÉn n·∫Øp c√≥ th·ªÉ gi√∫p gi·∫£m ______ v√† c·∫£i thi·ªán s·ª± t·∫≠p trung.", key: ["reduce", "concentration"], opts: ["distract", "distractingly", "distractions", "distraction"], optsVi: ["...", "...", "s·ª± xao nh√£ng (s·ªë nhi·ªÅu)", "..."], correct: 2, exp: "Gi·∫£m c√°c y·∫øu t·ªë g√¢y xao nh√£ng -> <b>distractions</b>." },
            { q: "You should take pride ________ the fact that your English is improving.", qVi: "B·∫°n n√™n t·ª± h√†o ______ th·ª±c t·∫ø l√† ti·∫øng Anh c·ªßa b·∫°n ƒëang ƒë∆∞·ª£c c·∫£i thi·ªán.", key: ["take pride", "preposition"], opts: ["with", "in", "on", "of"], optsVi: ["...", "trong/v·ªÅ", "...", "..."], correct: 1, exp: "Take pride <b>in</b> (t·ª± h√†o v·ªÅ)." },
            { q: "Bai Dinh Pagoda is a large complex which includes many ________ built over a long period of time.", qVi: "Ch√πa B√°i ƒê√≠nh l√† m·ªôt qu·∫ßn th·ªÉ l·ªõn bao g·ªìm nhi·ªÅu ______ ƒë∆∞·ª£c x√¢y d·ª±ng trong m·ªôt th·ªùi gian d√†i.", key: ["built", "complex"], opts: ["ingredients", "measures", "patterns", "structures"], optsVi: ["th√†nh ph·∫ßn", "bi·ªán ph√°p", "m·∫´u", "c√¥ng tr√¨nh/c·∫•u tr√∫c"], correct: 3, exp: "C√°c c√¥ng tr√¨nh x√¢y d·ª±ng -> <b>structures</b>." },
            { q: "English is the first language in many countries outside ________ United Kingdom.", qVi: "Ti·∫øng Anh l√† ng√¥n ng·ªØ ƒë·∫ßu ti√™n ·ªü nhi·ªÅu qu·ªëc gia b√™n ngo√†i V∆∞∆°ng qu·ªëc Anh.", key: ["United Kingdom", "article"], opts: ["the", "a", "an", "√ò"], optsVi: ["...", "...", "...", "..."], correct: 0, exp: "T√™n n∆∞·ªõc c√≥ 'Kingdom/States...' d√πng m·∫°o t·ª´ <b>the</b>." },
            { q: "The traditions in our country are ________, with cultural practices passed down through generations.", qVi: "C√°c truy·ªÅn th·ªëng ·ªü n∆∞·ªõc ta r·∫•t ______, v·ªõi c√°c t·∫≠p t·ª•c vƒÉn h√≥a ƒë∆∞·ª£c truy·ªÅn qua nhi·ªÅu th·∫ø h·ªá.", key: ["traditions", "generations"], opts: ["world-famous", "deep-rooted", "family-oriented", "well-balanced"], optsVi: ["n·ªïi ti·∫øng th·∫ø gi·ªõi", "ƒÉn s√¢u b√°m r·ªÖ/l√¢u ƒë·ªùi", "h∆∞·ªõng v·ªÅ gia ƒë√¨nh", "c√¢n b·∫±ng"], correct: 1, exp: "Truy·ªÅn th·ªëng l√¢u ƒë·ªùi -> <b>deep-rooted</b>." },

            // PART 3 (Image 2)
            { q: "The relationship among members in our family is quite ________ . We can express our opinions and our parents listen to us.", qVi: "M·ªëi quan h·ªá gi·ªØa c√°c th√†nh vi√™n trong gia ƒë√¨nh t√¥i kh√° ______ . Ch√∫ng t√¥i c√≥ th·ªÉ b√†y t·ªè √Ω ki·∫øn v√† cha m·∫π l·∫Øng nghe ch√∫ng t√¥i.", key: ["express opinions", "listen"], opts: ["stressful", "convenient", "democratic", "modern"], optsVi: ["cƒÉng th·∫≥ng", "ti·ªán l·ª£i", "d√¢n ch·ªß/b√¨nh ƒë·∫≥ng", "hi·ªán ƒë·∫°i"], correct: 2, exp: "T√¥n tr·ªçng √Ω ki·∫øn -> <b>democratic</b>." },
            { q: "The Nguyens may not be wealthy, but they are very ________ with their lives.", qVi: "Gia ƒë√¨nh Nguy·ªÖn c√≥ th·ªÉ kh√¥ng gi√†u c√≥, nh∆∞ng h·ªç r·∫•t ______ v·ªõi cu·ªôc s·ªëng c·ªßa m√¨nh.", key: ["wealthy", "but"], opts: ["fond", "satisfied", "keen", "amazed"], optsVi: ["th√≠ch", "h√†i l√≤ng", "th√≠ch", "kinh ng·∫°c"], correct: 1, exp: "H√†i l√≤ng v·ªõi cu·ªôc s·ªëng -> <b>satisfied</b> with." },
            { q: "My friends were all extremely ________ when they heard I‚Äôd lost my job.", qVi: "B·∫°n b√® t√¥i ƒë·ªÅu c·ª±c k·ª≥ ______ khi nghe tin t√¥i m·∫•t vi·ªác.", key: ["lost job", "feeling"], opts: ["tolerant", "sympathetic", "obedient", "confident"], optsVi: ["khoan dung", "th√¥ng c·∫£m", "v√¢ng l·ªùi", "t·ª± tin"], correct: 1, exp: "Th√¥ng c·∫£m/chia s·∫ª -> <b>sympathetic</b>." },
            { q: "________ gambling is a bad habit that is difficult to get rid of.", qVi: "C·ªù b·∫°c ______ l√† m·ªôt th√≥i quen x·∫•u kh√≥ b·ªè.", key: ["gambling", "bad habit"], opts: ["Compulsion", "Compulsivity", "Compulsive", "Compulsory"], optsVi: ["S·ª± b·∫Øt bu·ªôc", "...", "Nghi·ªán/Kh√¥ng ki·ªÉm so√°t ƒë∆∞·ª£c", "B·∫Øt bu·ªôc"], correct: 2, exp: "Ch·ª©ng nghi·ªán c·ªù b·∫°c -> <b>Compulsive</b> gambling." },
            { q: "________ people tend to focus on family values, draw strength from their family, and put the needs of the family ahead of their own.", qVi: "Nh·ªØng ng∆∞·ªùi ______ c√≥ xu h∆∞·ªõng t·∫≠p trung v√†o c√°c gi√° tr·ªã gia ƒë√¨nh...", key: ["family values"], opts: ["Object-oriented", "Profit-oriented", "Family-friendly", "Family-oriented"], optsVi: ["H∆∞·ªõng ƒë·ªëi t∆∞·ª£ng", "H∆∞·ªõng l·ª£i nhu·∫≠n", "Th√¢n thi·ªán gia ƒë√¨nh", "H∆∞·ªõng v·ªÅ gia ƒë√¨nh"], correct: 3, exp: "Ng∆∞·ªùi coi tr·ªçng gia ƒë√¨nh -> <b>Family-oriented</b>." },
            { q: "We can ________ the problem of space by building an extension.", qVi: "Ch√∫ng ta c√≥ th·ªÉ ______ v·∫•n ƒë·ªÅ kh√¥ng gian b·∫±ng c√°ch x√¢y th√™m ph·∫ßn m·ªü r·ªông.", key: ["problem", "solve"], opts: ["take off", "get round", "put aside", "do out"], optsVi: ["c·∫•t c√°nh", "gi·∫£i quy·∫øt/tr√°nh n√©", "ƒë·ªÉ d√†nh", "d·ªçn d·∫πp"], correct: 1, exp: "Gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ kh√≥ khƒÉn -> <b>get round</b> (a problem)." },
            { q: "Yesterday, they promised providing us ________ more details about the old Vietnamese lifestyle.", qVi: "H√¥m qua, h·ªç ƒë√£ h·ª©a cung c·∫•p cho ch√∫ng t√¥i ______ th√™m chi ti·∫øt v·ªÅ l·ªëi s·ªëng Vi·ªát Nam x∆∞a.", key: ["providing", "preposition"], opts: ["for", "with", "of", "by"], optsVi: ["...", "v·ªõi", "...", "..."], correct: 1, exp: "Provide sb <b>with</b> sth (cung c·∫•p cho ai c√°i g√¨)." },
            { q: "My flight to New York ________ off at 8.45 a.m tomorrow.", qVi: "Chuy·∫øn bay c·ªßa t√¥i ƒë·∫øn New York ______ l√∫c 8:45 s√°ng mai.", key: ["flight schedule", "tomorrow"], opts: ["sets", "will set", "set", "is setting"], optsVi: ["c·∫•t c√°nh (HTƒê)", "...", "...", "..."], correct: 0, exp: "L·ªãch tr√¨nh t√†u xe/m√°y bay d√πng Hi·ªán t·∫°i ƒë∆°n -> <b>sets</b> off (ho·∫∑c takes off)." },
            { q: "The study of these animals ________ truly fascinating, and many books have been written about them.", qVi: "Vi·ªác nghi√™n c·ª©u nh·ªØng lo√†i ƒë·ªông v·∫≠t n√†y ______ th·ª±c s·ª± h·∫•p d·∫´n...", key: ["The study", "singular"], opts: ["are", "were", "was", "is"], optsVi: ["...", "...", "l√† (QK)", "l√† (HT)"], correct: 3, exp: "Ch·ªß ng·ªØ 'The study' (s·ªë √≠t) -> <b>is</b>." },
            { q: "The man and the animals ________ you saw at the circus came from Ha Noi capital.", qVi: "Ng∆∞·ªùi ƒë√†n √¥ng v√† nh·ªØng con v·∫≠t ______ b·∫°n th·∫•y ·ªü r·∫°p xi·∫øc ƒë·∫øn t·ª´ th·ªß ƒë√¥ H√† N·ªôi.", key: ["man and animals", "relative clause"], opts: ["which", "whose", "who", "that"], optsVi: ["...", "...", "...", "c√°i m√†/ng∆∞·ªùi m√†"], correct: 3, exp: "Ti·ªÅn t·ªë g·ªìm c·∫£ ng∆∞·ªùi v√† v·∫≠t -> d√πng <b>that</b>." },
            { q: "London ________ an underground train system since the nineteenth century.", qVi: "London ______ m·ªôt h·ªá th·ªëng t√†u ƒëi·ªán ng·∫ßm k·ªÉ t·ª´ th·∫ø k·ª∑ 19.", key: ["since", "tense"], opts: ["have had", "had", "has had", "has"], optsVi: ["...", "...", "ƒë√£ c√≥ (HTHT)", "..."], correct: 2, exp: "D·∫•u hi·ªáu 'since' -> Hi·ªán t·∫°i ho√†n th√†nh. London s·ªë √≠t -> <b>has had</b>." },
            { q: "There was ________ very interesting news on the radio this morning about the earthquake in Italy.", qVi: "C√≥ ______ tin t·ª©c r·∫•t th√∫ v·ªã tr√™n ƒë√†i ph√°t thanh s√°ng nay v·ªÅ tr·∫≠n ƒë·ªông ƒë·∫•t ·ªü √ù.", key: ["news", "uncountable"], opts: ["a", "the", "an", "x"], optsVi: ["...", "...", "...", "kh√¥ng m·∫°o t·ª´"], correct: 3, exp: "News l√† danh t·ª´ kh√¥ng ƒë·∫øm ƒë∆∞·ª£c -> kh√¥ng d√πng a/an. ·ªû ƒë√¢y n√≥i chung chung -> <b>x</b> (ho·∫∑c some)." },

            // PART 4 (Image 3)
            { q: "I wish he ________ complaining about his parents and had a heart-to-heart conversation with them.", qVi: "T√¥i ∆∞·ªõc anh ·∫•y ______ ph√†n n√†n v·ªÅ cha m·∫π v√† c√≥ m·ªôt cu·ªôc tr√≤ chuy·ªán ch√¢n t√¨nh v·ªõi h·ªç.", key: ["wish", "complain"], opts: ["stops", "will stop", "stopped", "has stopped"], optsVi: ["...", "...", "ng·ª´ng (QKƒê)", "..."], correct: 2, exp: "∆Ø·ªõc mu·ªën tr√°i v·ªõi hi·ªán t·∫°i -> Qu√° kh·ª© ƒë∆°n: <b>stopped</b>." },
            { q: "We're not sure where ________ the painting.", qVi: "Ch√∫ng t√¥i kh√¥ng ch·∫Øc ______ b·ª©c tranh ·ªü ƒë√¢u.", key: ["where", "to V"], opts: ["hang", "to hang", "hanging", "hung"], optsVi: ["...", "treo", "...", "..."], correct: 1, exp: "Wh-word + to V -> where <b>to hang</b>." },
            { q: "The ________ can help make a city more sustainable and livable.", qVi: "______ c√≥ th·ªÉ gi√∫p l√†m cho m·ªôt th√†nh ph·ªë b·ªÅn v·ªØng v√† ƒë√°ng s·ªëng h∆°n.", key: ["make city livable"], opts: ["concrete jungle", "green space", "noise pollution", "food waste"], optsVi: ["r·ª´ng b√™ t√¥ng", "kh√¥ng gian xanh", "√¥ nhi·ªÖm ti·∫øng ·ªìn", "l√£ng ph√≠ th·ª±c ph·∫©m"], correct: 1, exp: "Y·∫øu t·ªë t√≠ch c·ª±c -> <b>green space</b>." },
            { q: "She ________ respiratory problems due to the pollution in the city.", qVi: "C√¥ ·∫•y ______ c√°c v·∫•n ƒë·ªÅ v·ªÅ h√¥ h·∫•p do √¥ nhi·ªÖm trong th√†nh ph·ªë.", key: ["respiratory problems", "illness"], opts: ["came up with", "came down with", "came across", "came away with"], optsVi: ["nghƒ© ra", "m·∫Øc ph·∫£i/b·ªã b·ªánh", "t√¨nh c·ªù g·∫∑p", "..."], correct: 1, exp: "M·∫Øc b·ªánh -> <b>came down with</b>." },
            { q: "Marry work out at his home gyms to maintain ________ health.", qVi: "Marry t·∫≠p th·ªÉ d·ª•c t·∫°i ph√≤ng t·∫≠p ·ªü nh√† ƒë·ªÉ duy tr√¨ s·ª©c kh·ªèe ______.", key: ["gym", "health"], opts: ["mental", "emotional", "well-balanced", "physical"], optsVi: ["tinh th·∫ßn", "c·∫£m x√∫c", "c√¢n b·∫±ng", "th·ªÉ ch·∫•t"], correct: 3, exp: "T·∫≠p gym -> <b>physical</b> health." },
            { q: "The bigger the house is, the ________ the rent is.", qVi: "Ng√¥i nh√† c√†ng l·ªõn, ti·ªÅn thu√™ c√†ng ______.", key: ["The bigger", "Double comparative"], opts: ["more expensive", "less expensive", "most expensive", "expensive"], optsVi: ["ƒë·∫Øt h∆°n", "...", "...", "..."], correct: 0, exp: "So s√°nh k√©p: The bigger ..., the <b>more expensive</b> ..." },
            { q: "Many Vietnamese families follow the custom of ________ ancestors by setting up an altar at home.", qVi: "Nhi·ªÅu gia ƒë√¨nh Vi·ªát Nam theo phong t·ª•c ______ t·ªï ti√™n b·∫±ng c√°ch l·∫≠p b√†n th·ªù t·∫°i nh√†.", key: ["ancestors", "altar"], opts: ["worshipping", "distracting", "appearing", "maintaining"], optsVi: ["th·ªù c√∫ng", "l√†m xao nh√£ng", "xu·∫•t hi·ªán", "duy tr√¨"], correct: 0, exp: "Th·ªù c√∫ng t·ªï ti√™n -> <b>worshipping</b>." },
            { q: "If Alex looks up the word in the dictionary, he ________ the meaning of it.", qVi: "N·∫øu Alex tra t·ª´ trong t·ª´ ƒëi·ªÉn, anh ·∫•y ______ nghƒ©a c·ªßa n√≥.", key: ["If Type 1", "result"], opts: ["knows", "will know", "would know", "won't know"], optsVi: ["...", "s·∫Ω bi·∫øt", "...", "..."], correct: 1, exp: "C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1 -> <b>will know</b>." },
            { q: "During the trip to Thailand, his parents enjoyed a number of local ________ like pad Thai and tom yum soup.", qVi: "Trong chuy·∫øn ƒëi ƒë·∫øn Th√°i Lan, b·ªë m·∫π anh ·∫•y ƒë√£ th∆∞·ªüng th·ª©c m·ªôt s·ªë ______ ƒë·ªãa ph∆∞∆°ng nh∆∞ pad Th√°i v√† s√∫p tom yum.", key: ["pad Thai", "tom yum"], opts: ["customs", "brands", "traditions", "specialities"], optsVi: ["phong t·ª•c", "th∆∞∆°ng hi·ªáu", "truy·ªÅn th·ªëng", "ƒë·∫∑c s·∫£n"], correct: 3, exp: "M√≥n ƒÉn ƒë·∫∑c s·∫£n -> <b>specialities</b>." },
            { q: "While they ________ a movie in the living room, their neighbors suddenly knocked on the door.", qVi: "Trong khi h·ªç ______ m·ªôt b·ªô phim trong ph√≤ng kh√°ch, h√†ng x√≥m c·ªßa h·ªç ƒë·ªôt nhi√™n g√µ c·ª≠a.", key: ["While", "interrupted"], opts: ["watched", "were watched", "were watching", "watching"], optsVi: ["...", "...", "ƒëang xem (QK)", "..."], correct: 2, exp: "H√†nh ƒë·ªông ƒëang di·ªÖn ra trong qu√° kh·ª© -> <b>were watching</b>." },
            { q: "Clark ________ in a bank for 15 years. Then he gave it up.", qVi: "Clark ______ trong m·ªôt ng√¢n h√†ng trong 15 nƒÉm. Sau ƒë√≥ anh ·∫•y ƒë√£ b·ªè vi·ªác.", key: ["for 15 years", "gave it up (Past)"], opts: ["works", "worked", "was working", "has worked"], optsVi: ["...", "ƒë√£ l√†m vi·ªác (QKƒê)", "...", "..."], correct: 1, exp: "H√†nh ƒë·ªông ƒë√£ k·∫øt th√∫c ho√†n to√†n trong qu√° kh·ª© -> <b>worked</b>." },
            { q: "Elena recommended ________ the robotic research centre.", qVi: "Elena khuy√™n ______ trung t√¢m nghi√™n c·ª©u robot.", key: ["recommended", "verb"], opts: ["visit", "to visit", "visiting", "visited"], optsVi: ["...", "...", "thƒÉm", "..."], correct: 2, exp: "Recommend + V-ing -> <b>visiting</b>." },

            // PART 5 (Image 4)
            { q: "Have you ever considered ________ a pharmacist?", qVi: "B·∫°n ƒë√£ bao gi·ªù c√¢n nh·∫Øc ______ m·ªôt d∆∞·ª£c sƒ© ch∆∞a?", key: ["considered", "verb"], opts: ["become", "becoming", "to become", "became"], optsVi: ["...", "tr·ªü th√†nh", "...", "..."], correct: 1, exp: "Consider + V-ing -> <b>becoming</b>." },
            { q: "I had an ________ day in Da Lat last summer vacation.", qVi: "T√¥i ƒë√£ c√≥ m·ªôt ng√†y ______ ·ªü ƒê√† L·∫°t v√†o k·ª≥ ngh·ªâ h√® nƒÉm ngo√°i.", key: ["day", "adjective"], opts: ["enjoy", "enjoyable", "enjoyment", "enjoyably"], optsVi: ["th∆∞·ªüng th·ª©c", "th√∫ v·ªã", "s·ª± th√≠ch th√∫", "m·ªôt c√°ch th√∫ v·ªã"], correct: 1, exp: "T√≠nh t·ª´ b·ªï nghƒ©a cho danh t·ª´ 'day' -> <b>enjoyable</b>." },
            { q: "Mr Binh ________ in such an unpleasant workplace.", qVi: "√îng B√¨nh ______ ·ªü m·ªôt n∆°i l√†m vi·ªác kh√≥ ch·ªãu nh∆∞ v·∫≠y.", key: ["never", "word order"], opts: ["never has worked", "has never worked", "has worked never", "has never work"], optsVi: ["...", "ch∆∞a bao gi·ªù l√†m vi·ªác", "...", "..."], correct: 1, exp: "Tr·∫°ng t·ª´ 'never' ƒë·ª©ng gi·ªØa tr·ª£ ƒë·ªông t·ª´ v√† ƒë·ªông t·ª´ ch√≠nh -> <b>has never worked</b>." },
            { q: "If he is good at IT, he ________ get a good job.", qVi: "N·∫øu anh ·∫•y gi·ªèi CNTT, anh ·∫•y ______ c√≥ ƒë∆∞·ª£c m·ªôt c√¥ng vi·ªác t·ªët.", key: ["If Type 1", "ability/future"], opts: ["could", "must", "may", "will"], optsVi: ["...", "...", "...", "s·∫Ω"], correct: 3, exp: "C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1 (k·∫øt qu·∫£ ch·∫Øc ch·∫Øn h∆°n) -> <b>will</b> (ho·∫∑c can/may)." },
            { q: "Ms Laura ________ the new job in London because she didn't want to live far from her parents.", qVi: "C√¥ Laura ______ c√¥ng vi·ªác m·ªõi ·ªü London v√¨ c√¥ ·∫•y kh√¥ng mu·ªën s·ªëng xa cha m·∫π.", key: ["job", "refused"], opts: ["went on", "turned down", "take off", "set up"], optsVi: ["ti·∫øp t·ª•c", "t·ª´ ch·ªëi", "c·∫•t c√°nh", "thi·∫øt l·∫≠p"], correct: 1, exp: "T·ª´ ch·ªëi c√¥ng vi·ªác -> <b>turned down</b>." },
            { q: "We only see ________ beautiful terraced fields here.", qVi: "Ch√∫ng t√¥i ch·ªâ th·∫•y ______ ru·ªông b·∫≠c thang ƒë·∫πp ·ªü ƒë√¢y.", key: ["only", "fields"], opts: ["a little", "much", "many", "a few"], optsVi: ["...", "...", "...", "m·ªôt v√†i"], correct: 3, exp: "'Fields' ƒë·∫øm ƒë∆∞·ª£c, 'only' √°m ch·ªâ s·ªë l∆∞·ª£ng √≠t -> <b>a few</b>." },
            { q: "The rainforest was rich ________ diverse plant and animal life.", qVi: "R·ª´ng nhi·ªát ƒë·ªõi r·∫•t phong ph√∫ ______ ƒë·ªùi s·ªëng th·ª±c v·∫≠t v√† ƒë·ªông v·∫≠t ƒëa d·∫°ng.", key: ["rich", "preposition"], opts: ["in", "for", "on", "under"], optsVi: ["v·ªÅ", "...", "...", "..."], correct: 0, exp: "Rich <b>in</b> (phong ph√∫ v·ªÅ)." },
            { q: "Tuan Anh could hardly understand this math problem, so he learned it ________ .", qVi: "Tu·∫•n Anh h·∫ßu nh∆∞ kh√¥ng hi·ªÉu b√†i to√°n n√†y, v√¨ v·∫≠y c·∫≠u ·∫•y ƒë√£ h·ªçc n√≥ ______.", key: ["hardly understand", "learned"], opts: ["by chance", "by mistake", "on purpose", "by rote"], optsVi: ["t√¨nh c·ªù", "nh·∫ßm l·∫´n", "c·ªë √Ω", "h·ªçc v·∫πt"], correct: 3, exp: "H·ªçc m√† kh√¥ng hi·ªÉu -> learn <b>by rote</b> (h·ªçc v·∫πt)." },
            { q: "He wants to know when the ________ for his French assignment is.", qVi: "Anh ·∫•y mu·ªën bi·∫øt khi n√†o l√† ______ cho b√†i t·∫≠p ti·∫øng Ph√°p c·ªßa m√¨nh.", key: ["when", "assignment"], opts: ["due date", "distractions", "optimistic", "anxiety"], optsVi: ["h·∫°n ch√≥t", "s·ª± xao nh√£ng", "l·∫°c quan", "s·ª± lo l·∫Øng"], correct: 0, exp: "Ng√†y h·∫øt h·∫°n n·ªôp b√†i -> <b>due date</b>." },
            { q: "My sister has just bought a new English book for me when she visited ________ UK.", qVi: "Ch·ªã t√¥i v·ª´a mua m·ªôt cu·ªën s√°ch ti·∫øng Anh m·ªõi cho t√¥i khi ch·ªã ·∫•y ƒë·∫øn thƒÉm V∆∞∆°ng qu·ªëc Anh.", key: ["UK", "article"], opts: ["√ò", "an", "the", "a"], optsVi: ["...", "...", "...", "..."], correct: 2, exp: "T√™n n∆∞·ªõc vi·∫øt t·∫Øt (UK, USA) d√πng m·∫°o t·ª´ <b>the</b>." },
            { q: "The boy felt ________ when he took my bag by mistake.", qVi: "C·∫≠u b√© c·∫£m th·∫•y ______ khi c·∫≠u ·∫•y c·∫ßm nh·∫ßm t√∫i c·ªßa t√¥i.", key: ["mistake", "feeling"], opts: ["amazing", "embarrassed", "unpleasant", "helpful"], optsVi: ["kinh ng·∫°c", "x·∫•u h·ªï/ng∆∞·ª£ng", "kh√≥ ch·ªãu", "h·ªØu √≠ch"], correct: 1, exp: "L√†m sai n√™n th·∫•y ng∆∞·ª£ng -> <b>embarrassed</b>." },
            { q: "We should work together to ________ our traditions. They are of great value to us.", qVi: "Ch√∫ng ta n√™n l√†m vi·ªác c√πng nhau ƒë·ªÉ ______ truy·ªÅn th·ªëng c·ªßa ch√∫ng ta. Ch√∫ng r·∫•t c√≥ gi√° tr·ªã ƒë·ªëi v·ªõi ch√∫ng ta.", key: ["traditions", "value"], opts: ["spend", "preserve", "occupy", "protection"], optsVi: ["ti√™u", "b·∫£o t·ªìn", "chi·∫øm ƒë√≥ng", "s·ª± b·∫£o v·ªá"], correct: 1, exp: "G√¨n gi·ªØ truy·ªÅn th·ªëng -> <b>preserve</b>." }
        ];

        let answeredSet = new Set();
        let correctCount = 0;
        const totalCount = quizData.length;

        function initQuiz() {
            const container = document.getElementById('quiz-container');
            const nav = document.getElementById('q-nav');
            document.getElementById('stat-total').innerText = totalCount;
            document.getElementById('final-total').innerText = totalCount;

            quizData.forEach((item, index) => {
                const displayIndex = index + 367; // Start numbering from 367
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `q-card-${index}`;
                
                card.innerHTML = `
                    <div class="question-text">
                        Question ${displayIndex}. ${item.q}
                        <div class="trans-text" id="trans-q-${index}">${item.qVi}</div>
                    </div>

                    <button class="btn-hint-toggle" onclick="toggleHint(${index})">
                        üí° G·ª£i √Ω
                    </button>
                    <div class="hint-content" id="hint-box-${index}">
                        <strong>Keywords:</strong> ${item.key.join('; ')}
                    </div>

                    <div class="options-list">
                        ${item.opts.map((opt, i) => `
                            <button class="option-btn" onclick="checkAnswer(this, ${index}, ${i})">
                                <span><b>${String.fromCharCode(65 + i)}.</b> ${opt}</span>
                                <span class="trans-text" id="trans-opt-${index}-${i}">(${item.optsVi[i]})</span>
                            </button>
                        `).join('')}
                    </div>
                    
                    <div class="explanation-box" id="exp-${index}"></div>

                    <button class="btn-trans-toggle" id="btn-trans-${index}" onclick="toggleTrans(${index})" disabled title="H√£y ch·ªçn ƒë√°p √°n tr∆∞·ªõc ƒë·ªÉ xem d·ªãch nghƒ©a">
                        üîí D·ªãch nghƒ©a
                    </button>
                `;
                container.appendChild(card);

                const qNum = document.createElement('div');
                qNum.className = 'q-num';
                qNum.id = `nav-${index}`;
                qNum.innerText = displayIndex;
                qNum.onclick = () => {
                    card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    if(window.innerWidth <= 768) toggleSidebar();
                };
                nav.appendChild(qNum);
            });
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
            
            if(sidebar.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = 'auto';
            }
        }

        function toggleHint(index) {
            document.getElementById(`hint-box-${index}`).classList.toggle('show');
        }

        function toggleTrans(index) {
            const qTrans = document.getElementById(`trans-q-${index}`);
            const btn = document.getElementById(`btn-trans-${index}`);
            
            qTrans.classList.toggle('show');
            for (let i = 0; i < 4; i++) {
                const optTrans = document.getElementById(`trans-opt-${index}-${i}`);
                if(optTrans) optTrans.classList.toggle('show');
            }
            
            if (qTrans.classList.contains('show')) {
                btn.innerHTML = 'üåê ·∫®n d·ªãch nghƒ©a';
                btn.style.backgroundColor = '#e8f0fe';
                btn.style.color = '#1a73e8';
            } else {
                btn.innerHTML = 'üåê D·ªãch nghƒ©a';
                btn.style.backgroundColor = '#f1f3f4';
                btn.style.color = '#555';
            }
        }

        function updateStats() {
            document.getElementById('stat-correct').innerText = correctCount;
            const score = (correctCount / totalCount * 10).toFixed(1);
            document.getElementById('stat-score').innerText = score;
        }

        function checkAnswer(btn, qIndex, optIndex) {
            if (answeredSet.has(qIndex)) return;
            answeredSet.add(qIndex);

            const buttons = btn.parentElement.querySelectorAll('.option-btn');
            const correctIndex = quizData[qIndex].correct;
            const expBox = document.getElementById(`exp-${qIndex}`);
            const transBtn = document.getElementById(`btn-trans-${qIndex}`);
            const navNum = document.getElementById(`nav-${qIndex}`);

            if (transBtn.hasAttribute('disabled')) {
                transBtn.removeAttribute('disabled');
                transBtn.innerHTML = 'üåê D·ªãch nghƒ©a';
            }

            if (optIndex === correctIndex) {
                btn.classList.add('correct');
                navNum.classList.add('done-correct');
                correctCount++;
            } else {
                btn.classList.add('wrong');
                navNum.classList.add('done-wrong');
                buttons[correctIndex].classList.add('correct');
            }

            updateStats();
            buttons.forEach(b => b.classList.add('disabled'));

            const percent = (answeredSet.size / quizData.length) * 100;
            document.getElementById('progress-bar').style.width = percent + '%';

            expBox.innerHTML = `<strong>Gi·∫£i th√≠ch:</strong> ${quizData[qIndex].exp}`;
            expBox.style.display = 'block';
        }

        function submitQuiz() {
            if (window.innerWidth <= 768) {
                toggleSidebar();
            }
            
            if (answeredSet.size < totalCount) {
                const confirmSubmit = confirm(`B·∫°n m·ªõi l√†m ${answeredSet.size}/${totalCount} c√¢u. B·∫°n c√≥ ch·∫Øc mu·ªën n·ªôp b√†i kh√¥ng?`);
                if (!confirmSubmit) return;
            }

            const score = (correctCount / totalCount * 10).toFixed(1);
            let rank = "";
            if(score >= 9) rank = "Xu·∫•t s·∫Øc (Excellent)";
            else if(score >= 8) rank = "Gi·ªèi (Good)";
            else if(score >= 6.5) rank = "Kh√° (Fair)";
            else if(score >= 5) rank = "Trung b√¨nh (Average)";
            else rank = "C·∫ßn c·ªë g·∫Øng th√™m (Poor)";

            document.getElementById('final-score').innerText = score;
            document.getElementById('final-correct').innerText = correctCount;
            document.getElementById('final-rank').innerText = rank;
            document.getElementById('result-modal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('result-modal').style.display = 'none';
        }

        window.onload = initQuiz;
    </script>
</body>
</html>
