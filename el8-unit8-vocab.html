<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luy·ªán Thi Ti·∫øng Anh: Shopping & Frequency</title>
    <style>
        :root {
            --color-correct: Seagreen;
            --color-wrong: Crimson;
            --color-highlight-bg: Salmon;
            --color-highlight-text: white;
            --color-text: #333;
            --bg-body: #f0f2f5;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-body);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 15px;
        }

        .quiz-container {
            background: white;
            width: 100%;
            max-width: 800px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            overflow: hidden;
            padding: 30px;
            position: relative;
        }

        /* Header & Controls */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 15px;
        }

        .quiz-info {
            font-size: 1.1rem;
            font-weight: 600;
            color: #555;
        }

        .btn-hint {
            background-color: #FFB347; 
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .btn-hint:hover { filter: brightness(0.95); transform: translateY(-1px); }
        .btn-hint:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        /* Question Section */
        .question-box {
            font-size: 1.3rem;
            color: var(--color-text);
            margin-bottom: 30px;
            line-height: 1.6;
            font-weight: 700;
        }

        /* Keyword Highlighting Logic */
        .key {
            background-color: transparent;
            color: inherit;
            padding: 0;
            border-radius: 4px;
            transition: all 0.4s ease;
        }
        
        .key.active {
            background-color: var(--color-highlight-bg);
            color: var(--color-highlight-text);
            padding: 2px 6px;
            box-shadow: 0 2px 5px rgba(250, 128, 114, 0.4);
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option-btn {
            background: #fff;
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            font-weight: 500; 
            color: #444;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            border-color: #bbb;
            background-color: #f8f9fa;
        }

        /* States */
        .option-btn.correct {
            background-color: var(--color-correct) !important;
            color: white !important;
            border-color: var(--color-correct) !important;
            font-weight: 700 !important;
        }

        .option-btn.wrong {
            background-color: var(--color-wrong) !important;
            color: white !important;
            border-color: var(--color-wrong) !important;
        }
        
        .option-btn:disabled { cursor: default; }

        /* Post-Answer Actions */
        .action-area {
            display: none;
            gap: 15px;
            margin-bottom: 20px;
        }

        .btn-action {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 1rem;
            transition: transform 0.2s;
        }
        .btn-action:hover { transform: translateY(-2px); }

        .btn-explain { background-color: var(--color-correct); box-shadow: 0 4px 10px rgba(46, 139, 87, 0.3); }
        .btn-translate { background-color: var(--color-wrong); box-shadow: 0 4px 10px rgba(220, 20, 60, 0.3); }

        /* Content Boxes */
        .content-box {
            display: none;
            background: #f8f9fa;
            border-left: 5px solid #ccc;
            padding: 20px;
            margin-top: 15px;
            border-radius: 0 10px 10px 0;
            animation: slideIn 0.4s ease;
        }
        .content-box.show { display: block; }
        .box-explain { border-color: var(--color-correct); background-color: #f0fff4; }
        .box-translate { border-color: var(--color-wrong); background-color: #fff5f5; }

        .info-row { margin-bottom: 10px; font-size: 1rem; line-height: 1.5; }
        .info-label { font-weight: 800; display: inline-block; width: 110px; color: #333; }

        /* Navigation */
        .nav-controls { margin-top: 30px; text-align: right; }
        .btn-next {
            background-color: #333;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: none; 
            font-size: 1.1rem;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .btn-next:hover { background-color: #555; transform: translateY(-2px); }

        /* Result Screen */
        #result-screen {
            display: none;
            text-align: center;
            padding: 40px 20px;
            animation: fadeIn 0.5s;
        }
        
        .result-title { font-size: 2rem; color: #333; margin-bottom: 30px; }
        .score-circle {
            width: 150px; height: 150px;
            background: var(--color-correct);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 30px;
            color: white;
            font-size: 3.5rem;
            font-weight: bold;
            box-shadow: 0 10px 20px rgba(46, 139, 87, 0.4);
        }
        .score-detail { font-size: 1.3rem; color: #555; margin: 10px 0; }
        .btn-restart {
            background-color: var(--color-correct);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.2s;
        }
        .btn-restart:hover { transform: scale(1.05); }

        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        @media (max-width: 600px) {
            .options-grid { grid-template-columns: 1fr; }
            .quiz-container { padding: 20px; }
            .question-box { font-size: 1.1rem; }
            .action-area { flex-direction: column; }
        }
    </style>
</head>
<body>

<div class="quiz-container">
    <div id="quiz-content">
        <div class="quiz-header">
            <div class="quiz-info">C√¢u <span id="q-number" style="color: black;">1</span>/<span id="total-q">55</span></div>
            <button class="btn-hint" id="btn-hint" onclick="toggleHint()"><span>üí°</span> G·ª£i √Ω</button>
        </div>

        <div class="question-box" id="question-text"></div>
        <div class="options-grid" id="options-area"></div>

        <div class="action-area" id="action-area">
            <button class="btn-action btn-explain" onclick="toggleExplanation()">üìñ Gi·∫£i th√≠ch</button>
            <button class="btn-action btn-translate" onclick="toggleTranslate()">üáªüá≥ D·ªãch nghƒ©a</button>
        </div>

        <div id="explanation-box" class="content-box box-explain"></div>
        <div id="translation-box" class="content-box box-translate">
            <div id="trans-content" style="font-style: italic; font-size: 1.1rem; color: #444;"></div>
        </div>

        <div class="nav-controls">
            <button class="btn-next" id="btn-next" onclick="nextQuestion()">C√¢u ti·∫øp theo ‚ûú</button>
        </div>
    </div>

    <div id="result-screen">
        <h2 class="result-title">üéâ K·∫øt Qu·∫£ B√†i Thi</h2>
        <div class="score-circle" id="final-score-10">0.0</div>
        <p class="score-detail">ƒêi·ªÉm tr√™n thang 10</p>
        <div style="width: 60px; height: 4px; background: #eee; margin: 20px auto;"></div>
        <p class="score-detail">S·ªë c√¢u ƒë√∫ng: <b id="final-correct-count" style="color: seagreen;">0</b> / <span id="final-total-count">55</span></p>
        <button class="btn-restart" onclick="restartQuiz()">üîÑ L√†m l·∫°i b√†i thi</button>
    </div>
</div>

<script>
    // --- D·ªÆ LI·ªÜU 55 C√ÇU H·ªéI M·ªöI ---
    const quizData = [
    {
        id: 1,
        question: 'Some people go to the _______ for <span class="key">entertainment</span>.',
        options: ["A. shopping centres", "B. fixed price", "C. shopping list", "D. convenience store"],
        correctIndex: 0,
        translation: "M·ªôt s·ªë ng∆∞·ªùi ƒë·∫øn c√°c trung t√¢m mua s·∫Øm ƒë·ªÉ gi·∫£i tr√≠.",
        explanation: { keyword: "entertainment (gi·∫£i tr√≠)", knowledge: "T·ª´ v·ª±ng", topic: "ƒê·ªãa ƒëi·ªÉm mua s·∫Øm", feature: "Shopping centre (Trung t√¢m th∆∞∆°ng m·∫°i l·ªõn, c√≥ gi·∫£i tr√≠)" }
    },
    {
        id: 2,
        question: 'The shop owner <span class="key">treats</span> his _______ with a lot of respects.',
        options: ["A. item", "B. market", "C. fair", "D. customers"],
        correctIndex: 3,
        translation: "Ch·ªß c·ª≠a h√†ng ƒë·ªëi x·ª≠ v·ªõi kh√°ch h√†ng c·ªßa m√¨nh v·ªõi s·ª± t√¥n tr·ªçng l·ªõn.",
        explanation: { keyword: "treats (ƒë·ªëi x·ª≠), shop owner", knowledge: "T·ª´ v·ª±ng", topic: "Kinh doanh", feature: "Customers (Kh√°ch h√†ng)" }
    },
    {
        id: 3,
        question: 'She <span class="key">spends too much</span> time and money shopping. She is a _______.',
        options: ["A. shopaholic", "B. dollar store", "C. overshopping", "D. price tag"],
        correctIndex: 0,
        translation: "C√¥ ·∫•y d√†nh qu√° nhi·ªÅu th·ªùi gian v√† ti·ªÅn b·∫°c ƒë·ªÉ mua s·∫Øm. C√¥ ·∫•y l√† m·ªôt ng∆∞·ªùi nghi·ªán mua s·∫Øm.",
        explanation: { keyword: "too much time/money", knowledge: "T·ª´ v·ª±ng", topic: "Con ng∆∞·ªùi", feature: "Shopaholic (Ng∆∞·ªùi nghi·ªán mua s·∫Øm)" }
    },
    {
        id: 4,
        question: 'These sports clothes are _______. They are <span class="key">50% off</span>.',
        options: ["A. try on clothes", "B. hang out", "C. on sale", "D. online shop"],
        correctIndex: 2,
        translation: "Nh·ªØng b·ªô qu·∫ßn √°o th·ªÉ thao n√†y ƒëang gi·∫£m gi√°. Ch√∫ng ƒë∆∞·ª£c gi·∫£m 50%.",
        explanation: { keyword: "50% off (gi·∫£m 50%)", knowledge: "C·ª•m t·ª´", topic: "Mua s·∫Øm", feature: "On sale (ƒêang gi·∫£m gi√°)" }
    },
    {
        id: 5,
        question: 'He thinks that there\'s <span class="key">nothing worth buying</span> at a _______.',
        options: ["A. convenience", "B. dollar store", "C. goods", "D. customer"],
        correctIndex: 1,
        translation: "Anh ·∫•y nghƒ© r·∫±ng kh√¥ng c√≥ g√¨ ƒë√°ng mua ·ªü c·ª≠a h√†ng ƒë·ªìng gi√° (c·ª≠a h√†ng 1 ƒë√¥).",
        explanation: { keyword: "nothing worth buying", knowledge: "T·ª´ v·ª±ng", topic: "Lo·∫°i c·ª≠a h√†ng", feature: "Dollar store (C·ª≠a h√†ng gi√° r·∫ª/ƒë·ªìng gi√°)" }
    },
    {
        id: 6,
        question: 'There are a lot of _______ fruit and vegetables at a <span class="key">farmer\'s market</span>.',
        options: ["A. home-made", "B. outdoor", "C. home-grown", "D. offline"],
        correctIndex: 2,
        translation: "C√≥ r·∫•t nhi·ªÅu tr√°i c√¢y v√† rau c·ªß nh√† tr·ªìng t·∫°i ch·ª£ n√¥ng s·∫£n.",
        explanation: { keyword: "fruit and vegetables, farmer", knowledge: "T·ª´ v·ª±ng", topic: "S·∫£n ph·∫©m", feature: "Home-grown (C√¢y nh√† l√° v∆∞·ªùn/Nh√† tr·ªìng)" }
    },
    {
        id: 7,
        question: '<span class="key">How much</span> is it? I can‚Äôt find the _______.',
        options: ["A. during sales", "B. online shop", "C. discount shop", "D. price tag"],
        correctIndex: 3,
        translation: "C√°i n√†y gi√° bao nhi√™u? T√¥i kh√¥ng t√¨m th·∫•y m√°c gi√°.",
        explanation: { keyword: "How much (H·ªèi gi√°)", knowledge: "T·ª´ v·ª±ng", topic: "Mua s·∫Øm", feature: "Price tag (M√°c gi√°)" }
    },
    {
        id: 8,
        question: 'The shop sells <span class="key">only fresh local</span> _______.',
        options: ["A. produce", "B. access", "C. bargain", "D. sale"],
        correctIndex: 0,
        translation: "C·ª≠a h√†ng ch·ªâ b√°n n√¥ng s·∫£n t∆∞∆°i s·ªëng c·ªßa ƒë·ªãa ph∆∞∆°ng.",
        explanation: { keyword: "fresh local (t∆∞∆°i, ƒë·ªãa ph∆∞∆°ng)", knowledge: "T·ª´ v·ª±ng", topic: "N√¥ng nghi·ªáp", feature: "Produce (N√¥ng s·∫£n)" }
    },
    {
        id: 9,
        question: 'The _______ <span class="key">chain</span> announced that it was cutting the cost of all its fresh and frozen meat.',
        options: ["A. item", "B. shopper", "C. supermarket", "D. fair"],
        correctIndex: 2,
        translation: "Chu·ªói si√™u th·ªã th√¥ng b√°o r·∫±ng h·ªç ƒëang c·∫Øt gi·∫£m chi ph√≠ cho t·∫•t c·∫£ c√°c lo·∫°i th·ªãt t∆∞∆°i v√† ƒë√¥ng l·∫°nh.",
        explanation: { keyword: "chain (chu·ªói), meat", knowledge: "T·ª´ v·ª±ng", topic: "Kinh doanh", feature: "Supermarket chain (Chu·ªói si√™u th·ªã)" }
    },
    {
        id: 10,
        question: 'The children were <span class="key">dressed</span> in Halloween _______.',
        options: ["A. costumes", "B. farmers", "C. markets", "D. prices"],
        correctIndex: 0,
        translation: "Nh·ªØng ƒë·ª©a tr·∫ª m·∫∑c trang ph·ª•c Halloween.",
        explanation: { keyword: "dressed, Halloween", knowledge: "T·ª´ v·ª±ng", topic: "L·ªÖ h·ªôi", feature: "Costumes (Trang ph·ª•c h√≥a trang)" }
    },
    {
        id: 11,
        question: 'The <span class="key">price</span> of the painting was kept secret by the _______.',
        options: ["A. customer", "B. doctor", "C. seller", "D. teacher"],
        correctIndex: 2,
        translation: "Gi√° c·ªßa b·ª©c tranh ƒë√£ ƒë∆∞·ª£c ng∆∞·ªùi b√°n gi·ªØ b√≠ m·∫≠t.",
        explanation: { keyword: "kept secret (gi·ªØ b√≠ m·∫≠t)", knowledge: "T·ª´ v·ª±ng", topic: "Giao d·ªãch", feature: "Seller (Ng∆∞·ªùi b√°n)" }
    },
    {
        id: 12,
        question: 'All our fruit comes from the <span class="key">farmers‚Äô</span> _______.',
        options: ["A. clothes", "B. buyer", "C. dollar store", "D. market"],
        correctIndex: 3,
        translation: "T·∫•t c·∫£ tr√°i c√¢y c·ªßa ch√∫ng t√¥i ƒë·ªÅu ƒë·∫øn t·ª´ ch·ª£ n√¥ng s·∫£n.",
        explanation: { keyword: "farmers'", knowledge: "Collocation", topic: "ƒê·ªãa ƒëi·ªÉm", feature: "Farmers' market (Ch·ª£ n√¥ng s·∫£n)" }
    },
    {
        id: 13,
        question: 'Most <span class="key">_______ stores</span> are located on busy street corners or at gas stations.',
        options: ["A. goods", "B. difference", "C. convenience", "D. range"],
        correctIndex: 2,
        translation: "H·∫ßu h·∫øt c√°c c·ª≠a h√†ng ti·ªán l·ª£i ƒë·ªÅu n·∫±m ·ªü c√°c g√≥c ph·ªë s·∫ßm u·∫•t ho·∫∑c t·∫°i c√°c tr·∫°m xƒÉng.",
        explanation: { keyword: "gas stations, busy street", knowledge: "T·ª´ gh√©p", topic: "C·ª≠a h√†ng", feature: "Convenience store (C·ª≠a h√†ng ti·ªán l·ª£i)" }
    },
    {
        id: 14,
        question: 'She used to be an absolute _______ until she had a baby.',
        options: ["A. supermarket", "B. bargain", "C. buyer", "D. shopaholic"],
        correctIndex: 3,
        translation: "C√¥ ·∫•y t·ª´ng l√† m·ªôt ng∆∞·ªùi nghi·ªán mua s·∫Øm th·ª±c th·ª• cho ƒë·∫øn khi c√≥ em b√©.",
        explanation: { keyword: "absolute (th·ª±c th·ª•)", knowledge: "T·ª´ v·ª±ng", topic: "T√≠nh c√°ch", feature: "Shopaholic (Ng∆∞·ªùi nghi·ªán mua s·∫Øm)" }
    },
    {
        id: 15,
        question: 'A _______ shop is a shop that sells <span class="key">unusual or special</span> products.',
        options: ["A. speciality", "B. costumer", "C. price tag", "D. market"],
        correctIndex: 0,
        translation: "C·ª≠a h√†ng chuy√™n doanh l√† c·ª≠a h√†ng b√°n c√°c s·∫£n ph·∫©m ƒë·∫∑c bi·ªát ho·∫∑c ƒë·ªôc l·∫°.",
        explanation: { keyword: "special products", knowledge: "T·ª´ v·ª±ng", topic: "Lo·∫°i c·ª≠a h√†ng", feature: "Speciality shop (C·ª≠a h√†ng chuy√™n doanh)" }
    },
    {
        id: 16,
        question: 'They sell a <span class="key">wide _______</span> of skin-care products.',
        options: ["A. price", "B. convenience", "C. sale", "D. range"],
        correctIndex: 3,
        translation: "H·ªç b√°n ƒëa d·∫°ng c√°c s·∫£n ph·∫©m chƒÉm s√≥c da.",
        explanation: { keyword: "wide ... of", knowledge: "Collocation", topic: "S·ªë l∆∞·ª£ng", feature: "Wide range of (ƒêa d·∫°ng/Nhi·ªÅu lo·∫°i)" }
    },
    {
        id: 17,
        question: 'Click on this <span class="key">link</span> to visit our _______ bookstore.',
        options: ["A. large", "B. offline", "C. online", "D. narrow"],
        correctIndex: 2,
        translation: "Nh·∫•p v√†o li√™n k·∫øt n√†y ƒë·ªÉ gh√© thƒÉm hi·ªáu s√°ch tr·ª±c tuy·∫øn c·ªßa ch√∫ng t√¥i.",
        explanation: { keyword: "Click, link", knowledge: "T·ª´ v·ª±ng", topic: "C√¥ng ngh·ªá", feature: "Online bookstore" }
    },
    {
        id: 18,
        question: 'We had lunch at a(n) _______ caf√© in the <span class="key">city square</span>.',
        options: ["A. open-air", "B. farmers‚Äô market", "C. price tag", "D. dollar store"],
        correctIndex: 0,
        translation: "Ch√∫ng t√¥i ƒë√£ ƒÉn tr∆∞a t·∫°i m·ªôt qu√°n c√† ph√™ ngo√†i tr·ªùi ·ªü qu·∫£ng tr∆∞·ªùng th√†nh ph·ªë.",
        explanation: { keyword: "caf√©, city square", knowledge: "T·ª´ v·ª±ng", topic: "ƒê·ªãa ƒëi·ªÉm", feature: "Open-air (Ngo√†i tr·ªùi/L·ªô thi√™n)" }
    },
    {
        id: 19,
        question: 'The family sells their _______ vegetables at the local market.',
        options: ["A. home-grown", "B. outdoor", "C. home-made", "D. offline"],
        correctIndex: 0,
        translation: "Gia ƒë√¨nh b√°n rau tr·ªìng t·∫°i nh√† c·ªßa h·ªç ·ªü ch·ª£ ƒë·ªãa ph∆∞∆°ng.",
        explanation: { keyword: "vegetables (rau)", knowledge: "T·ª´ v·ª±ng", topic: "S·∫£n ph·∫©m", feature: "Home-grown (Nh√† tr·ªìng - d√πng cho c√¢y c·ªëi)" }
    },
    {
        id: 20,
        question: 'A bike is a very _______ way of getting around.',
        options: ["A. popular", "B. convenient", "C. attractive", "D. online"],
        correctIndex: 1,
        translation: "Xe ƒë·∫°p l√† m·ªôt ph∆∞∆°ng ti·ªán ƒëi l·∫°i r·∫•t thu·∫≠n ti·ªán.",
        explanation: { keyword: "getting around", knowledge: "T·ª´ v·ª±ng", topic: "T√≠nh ch·∫•t", feature: "Convenient (Ti·ªán l·ª£i/Thu·∫≠n ti·ªán)" }
    },
    {
        id: 21,
        question: 'Farmers‚Äô markets are a traditional way of selling home-grown fruits and _______ products.',
        options: ["A. home-grown", "B. homeless", "C. home-made", "D. homesick"],
        correctIndex: 2,
        translation: "Ch·ª£ n√¥ng s·∫£n l√† c√°ch truy·ªÅn th·ªëng ƒë·ªÉ b√°n tr√°i c√¢y nh√† tr·ªìng v√† c√°c s·∫£n ph·∫©m t·ª± l√†m.",
        explanation: { keyword: "products (s·∫£n ph·∫©m ch·∫ø bi·∫øn)", knowledge: "T·ª´ v·ª±ng", topic: "S·∫£n ph·∫©m", feature: "Home-made (Nh√† l√†m - b√°nh, m·ª©t...)" }
    },
    {
        id: 22,
        question: 'These _______ <span class="key">prices</span> give farmers a good life.',
        options: ["A. wandered", "B. discounted", "C. fixed", "D. attracted"],
        correctIndex: 2,
        translation: "M·ª©c gi√° c·ªë ƒë·ªãnh n√†y gi√∫p n√¥ng d√¢n c√≥ cu·ªôc s·ªëng t·ªët.",
        explanation: { keyword: "prices", knowledge: "Collocation", topic: "Kinh t·∫ø", feature: "Fixed prices (Gi√° c·ªë ƒë·ªãnh/Ni√™m y·∫øt)" }
    },
    {
        id: 23,
        question: 'Drivers should park in a(n) _______ area to <span class="key">prevent theft</span> at night.',
        options: ["A. well-lit", "B. home-grown", "C. convenient", "D. online"],
        correctIndex: 0,
        translation: "T√†i x·∫ø n√™n ƒë·ªó xe ·ªü khu v·ª±c c√≥ ƒë·ªß √°nh s√°ng ƒë·ªÉ ph√≤ng tr·ªôm v√†o ban ƒë√™m.",
        explanation: { keyword: "prevent theft, at night", knowledge: "T·ª´ v·ª±ng", topic: "An ninh", feature: "Well-lit (ƒê∆∞·ª£c chi·∫øu s√°ng t·ªët)" }
    },
    {
        id: 24,
        question: 'All the parks in our city are open _______.',
        options: ["A. year-round", "B. home-grown", "C. decisive", "D. home-made"],
        correctIndex: 0,
        translation: "T·∫•t c·∫£ c√°c c√¥ng vi√™n trong th√†nh ph·ªë c·ªßa ch√∫ng t√¥i ƒë·ªÅu m·ªü c·ª≠a quanh nƒÉm.",
        explanation: { keyword: "open (th·ªùi gian)", knowledge: "Tr·∫°ng t·ª´", topic: "Th·ªùi gian", feature: "Year-round (Quanh nƒÉm)" }
    },
    {
        id: 25,
        question: 'The store has changed its image in an effort to <span class="key">win back</span> _______ customers.',
        options: ["A. strict", "B. happy", "C. humble", "D. unhappy"],
        correctIndex: 3,
        translation: "C·ª≠a h√†ng ƒë√£ thay ƒë·ªïi h√¨nh ·∫£nh ƒë·ªÉ gi√†nh l·∫°i nh·ªØng kh√°ch h√†ng kh√¥ng h√†i l√≤ng.",
        explanation: { keyword: "win back (gi√†nh l·∫°i)", knowledge: "Ng·ªØ c·∫£nh", topic: "Kinh doanh", feature: "Unhappy customers (Kh√°ch h√†ng kh√¥ng h√†i l√≤ng)" }
    },
    {
        id: 26,
        question: 'They are offering a(n) _______ <span class="key">gift</span> with each product we buy.',
        options: ["A. expensive", "B. cheap", "C. unhappy", "D. free"],
        correctIndex: 3,
        translation: "H·ªç ƒëang t·∫∑ng m·ªôt m√≥n qu√† mi·ªÖn ph√≠ v·ªõi m·ªói s·∫£n ph·∫©m ch√∫ng t√¥i mua.",
        explanation: { keyword: "gift (qu√†), offering", knowledge: "T·ª´ v·ª±ng", topic: "Khuy·∫øn m√£i", feature: "Free gift (Qu√† t·∫∑ng mi·ªÖn ph√≠)" }
    },
    {
        id: 27,
        question: 'I prefer to <span class="key">do my</span> ____________ at shopping malls.',
        options: ["A. shopper", "B. shops", "C. shopping", "D. shop"],
        correctIndex: 2,
        translation: "T√¥i th√≠ch ƒëi mua s·∫Øm t·∫°i c√°c trung t√¢m th∆∞∆°ng m·∫°i.",
        explanation: { keyword: "do my...", knowledge: "Collocation", topic: "C·ª•m t·ª´ c·ªë ƒë·ªãnh", feature: "Do (my) shopping (ƒêi mua s·∫Øm)" }
    },
    {
        id: 28,
        question: 'In our group, most people spend most of their money ____________ clothes.',
        options: ["A. of", "B. at", "C. in", "D. on"],
        correctIndex: 3,
        translation: "Trong nh√≥m c·ªßa ch√∫ng t√¥i, h·∫ßu h·∫øt m·ªçi ng∆∞·ªùi d√†nh ph·∫ßn l·ªõn ti·ªÅn c·ªßa h·ªç v√†o qu·∫ßn √°o.",
        explanation: { keyword: "spend money", knowledge: "Gi·ªõi t·ª´", topic: "C·∫•u tr√∫c c√¢u", feature: "Spend money ON something" }
    },
    {
        id: 29,
        question: 'She should call the shipping company to <span class="key">complain</span> ____________ the problem.',
        options: ["A. to", "B. about", "C. on", "D. with"],
        correctIndex: 1,
        translation: "C√¥ ·∫•y n√™n g·ªçi cho c√¥ng ty v·∫≠n chuy·ªÉn ƒë·ªÉ ph√†n n√†n v·ªÅ v·∫•n ƒë·ªÅ n√†y.",
        explanation: { keyword: "complain", knowledge: "Gi·ªõi t·ª´", topic: "C·∫•u tr√∫c c√¢u", feature: "Complain ABOUT something" }
    },
    {
        id: 30,
        question: 'What do you like about shopping at a ____________ <span class="key">store</span>?',
        options: ["A. inconvenient", "B. convenience", "C. convenient", "D. conveniently"],
        correctIndex: 1,
        translation: "B·∫°n th√≠ch ƒëi·ªÅu g√¨ khi mua s·∫Øm t·∫°i m·ªôt c·ª≠a h√†ng ti·ªán l·ª£i?",
        explanation: { keyword: "store", knowledge: "Danh t·ª´ gh√©p", topic: "Lo·∫°i c·ª≠a h√†ng", feature: "Convenience store (Danh t·ª´ gh√©p)" }
    },
    {
        id: 31,
        question: 'Some people go to shopping centres to ____________ the <span class="key">heat or cold</span> outside.',
        options: ["A. keep", "B. stop", "C. get", "D. avoid"],
        correctIndex: 3,
        translation: "M·ªôt s·ªë ng∆∞·ªùi ƒë·∫øn trung t√¢m mua s·∫Øm ƒë·ªÉ tr√°nh c√°i n√≥ng ho·∫∑c l·∫°nh b√™n ngo√†i.",
        explanation: { keyword: "heat or cold", knowledge: "ƒê·ªông t·ª´", topic: "M·ª•c ƒë√≠ch", feature: "Avoid (Tr√°nh)" }
    },
    {
        id: 32,
        question: 'Do you like ____________ <span class="key">products</span>?',
        options: ["A. home-growing", "B. home-grew", "C. home-grown", "D. home-grow"],
        correctIndex: 2,
        translation: "B·∫°n c√≥ th√≠ch c√°c s·∫£n ph·∫©m nh√† tr·ªìng kh√¥ng?",
        explanation: { keyword: "products", knowledge: "T√≠nh t·ª´", topic: "S·∫£n ph·∫©m", feature: "Home-grown (T√≠nh t·ª´ gh√©p: ƒë∆∞·ª£c tr·ªìng t·∫°i nh√†)" }
    },
    {
        id: 33,
        question: 'The weather ____________ shopping at an open-air market.',
        options: ["A. effect", "B. effect", "C. affects", "D. affect"],
        correctIndex: 2,
        translation: "Th·ªùi ti·∫øt ·∫£nh h∆∞·ªüng ƒë·∫øn vi·ªác mua s·∫Øm t·∫°i ch·ª£ ngo√†i tr·ªùi.",
        explanation: { keyword: "The weather (S·ªë √≠t)", knowledge: "Ng·ªØ ph√°p", topic: "ƒê·ªông t·ª´", feature: "Affects (ƒê·ªông t·ª´ chia s·ªë √≠t)" }
    },
    {
        id: 34,
        question: 'Let\'s go to ____________ <span class="key">shops</span> to buy something as presents.',
        options: ["A. specialise", "B. speciality", "C. special", "D. specially"],
        correctIndex: 1,
        translation: "H√£y ƒë·∫øn c√°c c·ª≠a h√†ng chuy√™n doanh ƒë·ªÉ mua qu√† t·∫∑ng.",
        explanation: { keyword: "shops", knowledge: "Danh t·ª´ gh√©p", topic: "Lo·∫°i c·ª≠a h√†ng", feature: "Speciality shops (C·ª≠a h√†ng ƒë·∫∑c s·∫£n/chuy√™n doanh)" }
    },
    {
        id: 35,
        question: 'We can find many products ____________ <span class="key">lower prices</span> in a discount shop.',
        options: ["A. at", "B. by", "C. with", "D. on"],
        correctIndex: 0,
        translation: "Ch√∫ng ta c√≥ th·ªÉ t√¨m th·∫•y nhi·ªÅu s·∫£n ph·∫©m v·ªõi gi√° th·∫•p h∆°n t·∫°i c·ª≠a h√†ng gi·∫£m gi√°.",
        explanation: { keyword: "prices", knowledge: "Gi·ªõi t·ª´", topic: "Gi√° c·∫£", feature: "AT a price (·ªû m·ª©c gi√°...)" }
    },
    {
        id: 36,
        question: 'I don\'t like this store. The staff are rude and the ____________ <span class="key">service</span> is really bad, too.',
        options: ["A. costume", "B. customer", "C. customers", "D. custom"],
        correctIndex: 1,
        translation: "T√¥i kh√¥ng th√≠ch c·ª≠a h√†ng n√†y. Nh√¢n vi√™n th√¥ l·ªó v√† d·ªãch v·ª• kh√°ch h√†ng c≈©ng r·∫•t t·ªá.",
        explanation: { keyword: "service", knowledge: "Danh t·ª´ gh√©p", topic: "Kinh doanh", feature: "Customer service (D·ªãch v·ª• kh√°ch h√†ng)" }
    },
    {
        id: 37,
        question: 'He wants to ____________ <span class="key">about</span> the package he has just got.',
        options: ["A. complained", "B. complaining", "C. complain", "D. complains"],
        correctIndex: 2,
        translation: "Anh ·∫•y mu·ªën ph√†n n√†n v·ªÅ g√≥i h√†ng anh ·∫•y v·ª´a nh·∫≠n ƒë∆∞·ª£c.",
        explanation: { keyword: "wants to, about", knowledge: "Ng·ªØ ph√°p", topic: "ƒê·ªông t·ª´", feature: "Want to + V_inf (Complain)" }
    },
    {
        id: 38,
        question: 'Never buy things you don\'t need just because they are on ____________.',
        options: ["A. sale", "B. sell", "C. selling", "D. sold"],
        correctIndex: 0,
        translation: "ƒê·ª´ng bao gi·ªù mua nh·ªØng th·ª© b·∫°n kh√¥ng c·∫ßn ch·ªâ v√¨ ch√∫ng ƒëang gi·∫£m gi√°.",
        explanation: { keyword: "on ...", knowledge: "C·ª•m t·ª´", topic: "Mua s·∫Øm", feature: "On sale (ƒêang gi·∫£m gi√°)" }
    },
    {
        id: 39,
        question: 'Can you wave over a <span class="key">sales</span> ____________? I have a question about this jacket.',
        options: ["A. assistant", "B. assistance", "C. assist", "D. assisting"],
        correctIndex: 0,
        translation: "B·∫°n c√≥ th·ªÉ g·ªçi m·ªôt nh√¢n vi√™n b√°n h√†ng l·∫°i ƒë√¢y kh√¥ng? T√¥i c√≥ c√¢u h·ªèi v·ªÅ chi·∫øc √°o kho√°c n√†y.",
        explanation: { keyword: "sales ...", knowledge: "Danh t·ª´ gh√©p", topic: "Ngh·ªÅ nghi·ªáp", feature: "Sales assistant (Nh√¢n vi√™n b√°n h√†ng)" }
    },
    {
        id: 40,
        question: '____________ <span class="key">online</span> is more convenient than other kinds of shopping.',
        options: ["A. Shops", "B. Shopper", "C. Shopping", "D. Shop"],
        correctIndex: 2,
        translation: "Mua s·∫Øm tr·ª±c tuy·∫øn thu·∫≠n ti·ªán h∆°n c√°c h√¨nh th·ª©c mua s·∫Øm kh√°c.",
        explanation: { keyword: "online, is (ƒë·ªông t·ª´)", knowledge: "Ng·ªØ ph√°p", topic: "Danh ƒë·ªông t·ª´", feature: "Shopping (L√†m ch·ªß ng·ªØ)" }
    },
    {
        id: 41,
        question: 'He lives next door but I ___________ him.',
        options: ["A. rarely see", "B. sees rarely", "C. see rarely", "D. rarely sees"],
        correctIndex: 0,
        translation: "Anh ·∫•y s·ªëng ngay b√™n c·∫°nh nh∆∞ng t√¥i hi·∫øm khi g·∫∑p anh ·∫•y.",
        explanation: { keyword: "I (ch·ªß ng·ªØ)", knowledge: "Ng·ªØ ph√°p", topic: "Tr·∫°ng t·ª´ t·∫ßn su·∫•t", feature: "S + Adverb + Verb (rarely see)" }
    },
    {
        id: 42,
        question: 'She ___________ <span class="key">at home</span> on Sunday.',
        options: ["A. are always", "B. always are", "C. always is", "D. is always"],
        correctIndex: 3,
        translation: "C√¥ ·∫•y lu√¥n ·ªü nh√† v√†o Ch·ªß nh·∫≠t.",
        explanation: { keyword: "She, at home", knowledge: "Ng·ªØ ph√°p", topic: "Tr·∫°ng t·ª´ t·∫ßn su·∫•t", feature: "To be + Adverb (is always)" }
    },
    {
        id: 43,
        question: 'My father ___________ in the morning.',
        options: ["A. hardly ever jog", "B. hardly ever jogs", "C. jogs hardly ever", "D. hardly jogs ever"],
        correctIndex: 1,
        translation: "B·ªë t√¥i hi·∫øm khi ƒëi b·ªô th·ªÉ d·ª•c v√†o bu·ªïi s√°ng.",
        explanation: { keyword: "My father (s·ªë √≠t)", knowledge: "Ng·ªØ ph√°p", topic: "Hi·ªán t·∫°i ƒë∆°n", feature: "Adverb + V(s/es) -> hardly ever jogs" }
    },
    {
        id: 44,
        question: 'They ___________ volleyball with Phong and Quan.',
        options: ["A. play never", "B. plays never", "C. never plays", "D. never play"],
        correctIndex: 3,
        translation: "H·ªç kh√¥ng bao gi·ªù ch∆°i b√≥ng chuy·ªÅn v·ªõi Phong v√† Qu√¢n.",
        explanation: { keyword: "They (s·ªë nhi·ªÅu)", knowledge: "Ng·ªØ ph√°p", topic: "Hi·ªán t·∫°i ƒë∆°n", feature: "Adverb + V(inf) -> never play" }
    },
    {
        id: 45,
        question: 'We ___________ to the supermarket because it‚Äôs very far.',
        options: ["A. don‚Äôt go often", "B. often don‚Äôt go", "C. don‚Äôt often go", "D. doesn‚Äôt often go"],
        correctIndex: 2,
        translation: "Ch√∫ng t√¥i kh√¥ng th∆∞·ªùng xuy√™n ƒëi si√™u th·ªã v√¨ n√≥ r·∫•t xa.",
        explanation: { keyword: "We, don't", knowledge: "Ng·ªØ ph√°p", topic: "C√¢u ph·ªß ƒë·ªãnh", feature: "Don't + Adverb + Verb (don't often go)" }
    },
    {
        id: 46,
        question: 'Mai ___________ to the cinema with her classmates.',
        options: ["A. occasionally go", "B. occasionally goes", "C. goes occasionally", "D. go occasionally"],
        correctIndex: 1,
        translation: "Mai th·ªânh tho·∫£ng ƒëi xem phim v·ªõi c√°c b·∫°n c√πng l·ªõp.",
        explanation: { keyword: "Mai (s·ªë √≠t)", knowledge: "Ng·ªØ ph√°p", topic: "Hi·ªán t·∫°i ƒë∆°n", feature: "Adverb + V(es) -> occasionally goes" }
    },
    {
        id: 47,
        question: '___________ your health at the hospital?',
        options: ["A. Do you check frequently", "B. Do frequently you check", "C. Do you frequently check", "D. Do frequently check you"],
        correctIndex: 2,
        translation: "B·∫°n c√≥ th∆∞·ªùng xuy√™n ki·ªÉm tra s·ª©c kh·ªèe t·∫°i b·ªánh vi·ªán kh√¥ng?",
        explanation: { keyword: "Question (?)", knowledge: "Ng·ªØ ph√°p", topic: "C√¢u nghi v·∫•n", feature: "Do/Does + S + Adverb + V? (Do you frequently check)" }
    },
    {
        id: 48,
        question: 'These brands ___________ <span class="key">on sale</span>, just once or twice a year.',
        options: ["A. are seldom", "B. is seldom", "C. seldom is", "D. seldom are"],
        correctIndex: 0,
        translation: "C√°c th∆∞∆°ng hi·ªáu n√†y hi·∫øm khi gi·∫£m gi√°, ch·ªâ m·ªôt ho·∫∑c hai l·∫ßn m·ªôt nƒÉm.",
        explanation: { keyword: "brands (s·ªë nhi·ªÅu)", knowledge: "Ng·ªØ ph√°p", topic: "To be", feature: "To be + Adverb (are seldom)" }
    },
    {
        id: 49,
        question: 'My mother ___________ at the supermarket.',
        options: ["A. shops often", "B. often shops", "C. often shop", "D. shop often"],
        correctIndex: 1,
        translation: "M·∫π t√¥i th∆∞·ªùng mua s·∫Øm t·∫°i si√™u th·ªã.",
        explanation: { keyword: "My mother (s·ªë √≠t)", knowledge: "Ng·ªØ ph√°p", topic: "Hi·ªán t·∫°i ƒë∆°n", feature: "Adverb + V(s) -> often shops" }
    },
    {
        id: 50,
        question: '___________ happy when he talks to his friend?',
        options: ["A. Is always he", "B. Is he always", "C. Always is he", "D. He always is"],
        correctIndex: 1,
        translation: "Anh ·∫•y c√≥ lu√¥n vui v·∫ª khi n√≥i chuy·ªán v·ªõi b·∫°n m√¨nh kh√¥ng?",
        explanation: { keyword: "happy (t√≠nh t·ª´)", knowledge: "Ng·ªØ ph√°p", topic: "C√¢u h·ªèi v·ªõi To be", feature: "Be + S + Adverb + Adj? (Is he always)" }
    },
    {
        id: 51,
        question: 'We can ____________ bargain at a supermarket.',
        options: ["A. always", "B. never", "C. sometimes", "D. rarely"],
        correctIndex: 1,
        translation: "Ch√∫ng ta kh√¥ng bao gi·ªù c√≥ th·ªÉ m·∫∑c c·∫£ ·ªü si√™u th·ªã.",
        explanation: { keyword: "supermarket, bargain", knowledge: "Ki·∫øn th·ª©c chung", topic: "Mua s·∫Øm", feature: "Never (V√¨ si√™u th·ªã b√°n gi√° ni√™m y·∫øt)" }
    },
    {
        id: 52,
        question: 'My grandmother ____________ goes to the market. She goes there <span class="key">every day</span>.',
        options: ["A. always", "B. never", "C. often", "D. sometimes"],
        correctIndex: 0,
        translation: "B√† t√¥i lu√¥n ƒëi ch·ª£ mua th·ª©c ƒÉn. B√† ƒë·∫øn ƒë√≥ m·ªói ng√†y.",
        explanation: { keyword: "every day", knowledge: "Ng·ªØ ph√°p", topic: "M·ª©c ƒë·ªô t·∫ßn su·∫•t", feature: "Every day = Always (Lu√¥n lu√¥n)" }
    },
    {
        id: 53,
        question: '____________ your son be 14 years old <span class="key">next week</span>?',
        options: ["A. Will", "B. Are", "C. Does", "D. Can"],
        correctIndex: 0,
        translation: "Con trai b·∫°n s·∫Ω tr√≤n 14 tu·ªïi v√†o tu·∫ßn t·ªõi ph·∫£i kh√¥ng?",
        explanation: { keyword: "next week, be", knowledge: "Ng·ªØ ph√°p", topic: "T∆∞∆°ng lai ƒë∆°n", feature: "Will + V_inf (S·∫Ω)" }
    },
    {
        id: 54,
        question: 'How ____________ do you buy things online?',
        options: ["A. much", "B. always", "C. often", "D. far"],
        correctIndex: 2,
        translation: "B·∫°n c√≥ th∆∞·ªùng xuy√™n mua ƒë·ªì tr·ª±c tuy·∫øn kh√¥ng?",
        explanation: { keyword: "How ...", knowledge: "Collocation", topic: "C√¢u h·ªèi t·∫ßn su·∫•t", feature: "How often (H·ªèi m·ª©c ƒë·ªô th∆∞·ªùng xuy√™n)" }
    },
    {
        id: 55,
        question: 'That shop in the corner <span class="key">never</span> ____________ on Sunday.',
        options: ["A. opening", "B. will open", "C. open", "D. opens"],
        correctIndex: 3,
        translation: "C·ª≠a h√†ng ·ªü g√≥c ph·ªë ƒë√≥ kh√¥ng bao gi·ªù m·ªü c·ª≠a v√†o Ch·ªß nh·∫≠t.",
        explanation: { keyword: "That shop (s·ªë √≠t)", knowledge: "Ng·ªØ ph√°p", topic: "Hi·ªán t·∫°i ƒë∆°n", feature: "Never + V(s/es) -> opens" }
    }
    ];

    // State variables
    let currentQIndex = 0;
    let isAnswered = false;
    let scoreCount = 0; 

    // DOM Elements
    const quizContentEl = document.getElementById('quiz-content');
    const resultScreenEl = document.getElementById('result-screen');
    const qNumberEl = document.getElementById('q-number');
    const totalQEl = document.getElementById('total-q');
    const questionTextEl = document.getElementById('question-text');
    const optionsAreaEl = document.getElementById('options-area');
    const actionAreaEl = document.getElementById('action-area');
    const explainBoxEl = document.getElementById('explanation-box');
    const transBoxEl = document.getElementById('translation-box');
    const transContentEl = document.getElementById('trans-content');
    const btnNextEl = document.getElementById('btn-next');
    const btnHintEl = document.getElementById('btn-hint');

    const finalScore10El = document.getElementById('final-score-10');
    const finalCorrectCountEl = document.getElementById('final-correct-count');
    const finalTotalCountEl = document.getElementById('final-total-count');

    // Init
    totalQEl.textContent = quizData.length;
    loadQuestion();

    function loadQuestion() {
        isAnswered = false;
        const data = quizData[currentQIndex];
        
        qNumberEl.textContent = currentQIndex + 1;
        questionTextEl.innerHTML = data.question;
        optionsAreaEl.innerHTML = '';
        
        actionAreaEl.style.display = 'none';
        explainBoxEl.classList.remove('show');
        transBoxEl.classList.remove('show');
        btnNextEl.style.display = 'none';
        btnHintEl.disabled = false;

        data.options.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.textContent = opt;
            btn.onclick = () => checkAnswer(index, btn);
            optionsAreaEl.appendChild(btn);
        });
    }

    function toggleHint() {
        if(isAnswered) return;
        const keys = document.querySelectorAll('.key');
        keys.forEach(k => k.classList.add('active'));
    }

    function checkAnswer(selectedIndex, btnElement) {
        if (isAnswered) return;
        isAnswered = true;
        btnHintEl.disabled = true;

        const data = quizData[currentQIndex];
        
        // Auto trigger highlights
        const keys = document.querySelectorAll('.key');
        keys.forEach(k => k.classList.add('active'));

        const allBtns = document.querySelectorAll('.option-btn');
        
        if (selectedIndex === data.correctIndex) {
            btnElement.classList.add('correct');
            scoreCount++; 
        } else {
            btnElement.classList.add('wrong');
            allBtns[data.correctIndex].classList.add('correct');
        }

        allBtns.forEach(b => b.disabled = true);

        transContentEl.textContent = data.translation;
        explainBoxEl.innerHTML = `
            <div class="info-row"><span class="info-label">Keyword:</span> ${data.explanation.keyword}</div>
            <div class="info-row"><span class="info-label">Ki·∫øn th·ª©c:</span> ${data.explanation.knowledge}</div>
            <div class="info-row"><span class="info-label">Ch·ªß ƒë·ªÅ:</span> ${data.explanation.topic}</div>
            <div class="info-row"><span class="info-label">ƒê·∫∑c tr∆∞ng:</span> <span style="color:#d63031; font-weight:bold;">${data.explanation.feature}</span></div>
        `;

        actionAreaEl.style.display = 'flex';
        
        btnNextEl.style.display = 'inline-block';
        if (currentQIndex === quizData.length - 1) {
            btnNextEl.textContent = "Xem k·∫øt qu·∫£ ‚ûú";
            btnNextEl.onclick = showResult;
        } else {
            btnNextEl.textContent = "C√¢u ti·∫øp theo ‚ûú";
            btnNextEl.onclick = nextQuestion;
        }
    }

    function toggleExplanation() {
        explainBoxEl.classList.toggle('show');
        if(explainBoxEl.classList.contains('show')) transBoxEl.classList.remove('show');
    }

    function toggleTranslate() {
        transBoxEl.classList.toggle('show');
        if(transBoxEl.classList.contains('show')) explainBoxEl.classList.remove('show');
    }

    function nextQuestion() {
        currentQIndex++;
        loadQuestion();
    }

    function showResult() {
        quizContentEl.style.display = 'none';
        resultScreenEl.style.display = 'block';

        const total = quizData.length;
        const score10 = (scoreCount / total) * 10;
        
        finalCorrectCountEl.textContent = scoreCount;
        finalTotalCountEl.textContent = total;
        finalScore10El.textContent = score10 % 1 === 0 ? score10 : score10.toFixed(1);
    }

    function restartQuiz() {
        currentQIndex = 0;
        scoreCount = 0;
        resultScreenEl.style.display = 'none';
        quizContentEl.style.display = 'block';
        loadQuestion();
    }
</script>

</body>
</html>