<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>B√†i t·∫≠p Tr·∫Øc nghi·ªám: Sports & TV Programs</title>
    <style>
        :root {
            --primary-blue: #e8f0fe;
            --dark-blue: #1a73e8;
            --border-color: #dadce0;
            --correct-green: #1e8e3e;
            --wrong-red: #d93025;
            --trans-color: #5f6368;
            --hint-bg: #fff8e1;
            --hint-text: #f57f17;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            display: flex;
            flex-direction: column;
            /* Fix l·ªói cu·ªôn tr√™n mobile */
            height: auto;
            overflow: auto; 
        }

        /* === HEADER === */
        .header {
            background: white;
            padding: 10px 20px;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 101;
            flex-shrink: 0;
        }

        .header-top {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #5f6368;
            padding: 5px;
        }

        .header-title {
            margin: 0;
            font-size: 1.2em;
            color: #202124;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .progress-container {
            width: 100%;
            height: 6px;
            background-color: #eee;
            border-radius: 4px;
            margin-top: 10px;
        }

        #progress-bar {
            width: 0%;
            height: 100%;
            background-color: var(--dark-blue);
            border-radius: 4px;
            transition: width 0.4s ease;
        }

        /* === MAIN LAYOUT === */
        .main-container {
            display: flex;
            flex: 1;
            padding: 20px;
            gap: 25px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
            overflow: visible;
        }

        /* === SIDEBAR === */
        .sidebar {
            width: 280px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            height: calc(100vh - 100px); /* Chi·ªÅu cao c·ªë ƒë·ªãnh tr√™n desktop */
            overflow-y: auto;
            flex-shrink: 0;
            transition: transform 0.3s ease;
            position: sticky;
            top: 80px;
            z-index: 1000;
        }

        /* Overlay cho Mobile */
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .stats-box {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #eee;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.95em;
            color: #333;
        }
        
        .stat-value {
            font-weight: bold;
            color: var(--dark-blue);
        }

        .nav-container {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .question-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
        }

        .q-num {
            aspect-ratio: 1;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.9em;
            background: #fff;
        }

        .q-num.done-correct { background-color: #e6f4ea; border-color: var(--correct-green); color: var(--correct-green); font-weight: bold; }
        .q-num.done-wrong { background-color: #fce8e6; border-color: var(--wrong-red); color: var(--wrong-red); font-weight: bold; }

        .btn-submit {
            width: 100%;
            padding: 12px;
            background-color: var(--dark-blue);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1em;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* === QUIZ AREA === */
        .quiz-area {
            flex: 1;
            padding-bottom: 20px;
        }

        .question-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }

        .question-text {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 12px;
            line-height: 1.5;
            color: #202124;
        }

        /* Buttons */
        .btn-hint-toggle {
            align-self: flex-start;
            background-color: white;
            border: 1px solid #ffb74d;
            color: #f57f17;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 15px;
        }

        .hint-content {
            display: none;
            background-color: #fff3e0;
            border-left: 4px solid #ffb74d;
            padding: 10px 15px;
            margin-bottom: 15px;
            border-radius: 4px;
            font-size: 0.95em;
            color: #e65100;
        }
        .hint-content.show { display: block; animation: fadeIn 0.3s; }

        .options-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .option-btn {
            padding: 14px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: white;
            text-align: left;
            cursor: pointer;
            font-size: 1em;
            display: flex;
            flex-direction: column;
            line-height: 1.4;
            transition: background-color 0.2s;
        }

        .option-btn:active { background-color: #f1f3f4; }
        .option-btn.disabled { cursor: default; opacity: 0.9; }
        .option-btn.correct { background-color: #e6f4ea; border-color: var(--correct-green); color: var(--correct-green); }
        .option-btn.wrong { background-color: #fce8e6; border-color: var(--wrong-red); color: var(--wrong-red); }

        /* Translate Button */
        .btn-trans-toggle {
            margin-top: 20px;
            align-self: flex-start;
            background: #f1f3f4;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            color: #555;
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
        }
        .btn-trans-toggle:disabled { opacity: 0.5; background-color: #eee; }

        .trans-text {
            display: none;
            color: var(--trans-color);
            font-style: italic;
            font-size: 0.95em;
            margin-top: 5px;
            font-weight: normal;
            border-top: 1px dashed #eee;
            padding-top: 4px;
        }
        .trans-text.show { display: block; animation: fadeIn 0.3s; }

        .explanation-box {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            background-color: #fffde7;
            border-left: 4px solid #fbc02d;
            display: none;
            font-size: 0.95em;
        }

        /* === MODAL === */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 16px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: zoomIn 0.3s;
        }
        .modal-score { font-size: 3.5em; font-weight: bold; color: var(--dark-blue); margin: 10px 0; }
        .modal-details { margin: 20px 0; background: #f8f9fa; padding: 15px; border-radius: 8px; }
        .modal-btn { padding: 12px 30px; background: var(--dark-blue); color: white; border: none; border-radius: 8px; font-size: 1.1em; cursor: pointer; width: 100%; }

        /* === RESPONSIVE FIXES (MOBILE) === */
        @media (max-width: 768px) {
            .menu-toggle { display: block; }

            .main-container {
                padding: 10px;
                display: block; 
                height: auto;
                overflow: visible; 
            }

            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                width: 80%;
                max-width: 300px;
                height: 100%;
                margin: 0;
                border-radius: 0;
                border: none;
                transform: translateX(-100%);
                box-shadow: 2px 0 10px rgba(0,0,0,0.2);
            }
            
            .sidebar.active { transform: translateX(0); }
            .sidebar-overlay.active { display: block; }

            .quiz-area {
                padding: 0;
                height: auto;
                overflow: visible;
                margin-bottom: 50px;
            }

            .question-card { padding: 15px; margin-bottom: 15px; }
            .options-list { grid-template-columns: 1fr; }
            .header-title { font-size: 1em; }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes zoomIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>

    <div class="header">
        <div class="header-top">
            <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
            <h2 class="header-title">Topic: Sports & TV (40 Questions)</h2>
        </div>
        <div class="progress-container">
            <div id="progress-bar"></div>
        </div>
    </div>

    <div class="main-container">
        <div class="sidebar-overlay" id="sidebar-overlay" onclick="toggleSidebar()"></div>

        <div class="sidebar" id="sidebar">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3 style="margin:0 0 10px 0; color:#444">Th·ªëng k√™</h3>
                <span onclick="toggleSidebar()" style="cursor:pointer; font-size:1.5em; color:#888; padding: 5px;" class="mobile-only">‚úï</span>
            </div>
            
            <div class="stats-box">
                <div class="stat-item">
                    <span>S·ªë c√¢u ƒë√∫ng:</span>
                    <span class="stat-value"><span id="stat-correct">0</span>/<span id="stat-total">40</span></span>
                </div>
                <div class="stat-item">
                    <span>ƒêi·ªÉm s·ªë:</span>
                    <span class="stat-value"><span id="stat-score">0.0</span>/10</span>
                </div>
            </div>

            <div class="nav-container">
                <h4 style="margin:0 0 10px 0;">C√¢u h·ªèi</h4>
                <div class="question-grid" id="q-nav"></div>
            </div>

            <button class="btn-submit" onclick="submitQuiz()">N·ªôp b√†i</button>
        </div>

        <div class="quiz-area" id="quiz-container"></div>
    </div>

    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <h2 style="color: #444; margin-top:0">K·∫øt Qu·∫£</h2>
            <div>ƒêi·ªÉm s·ªë c·ªßa b·∫°n</div>
            <div class="modal-score" id="final-score">0.0</div>
            
            <div class="modal-details">
                <p>S·ªë c√¢u ƒë√∫ng: <b id="final-correct">0</b> / <span id="final-total">40</span></p>
                <p>X·∫øp lo·∫°i: <b id="final-rank" style="color: #e65100">---</b></p>
            </div>
            
            <button class="modal-btn" onclick="closeModal()">Xem l·∫°i b√†i</button>
        </div>
    </div>

    <script>
        // D·ªØ li·ªáu c√¢u h·ªèi m·ªõi (40 c√¢u)
        const quizData = [
            // PART 1 (C√¢u 1-20)
            { q: "You need a ______ to play badminton or table tennis.", qVi: "B·∫°n c·∫ßn m·ªôt ______ ƒë·ªÉ ch∆°i c·∫ßu l√¥ng ho·∫∑c b√≥ng b√†n.", key: ["play badminton", "table tennis"], opts: ["ball", "goggles", "racket", "bicycle"], optsVi: ["qu·∫£ b√≥ng", "k√≠nh b∆°i", "c√°i v·ª£t", "xe ƒë·∫°p"], correct: 2, exp: "C·∫ßu l√¥ng v√† b√≥ng b√†n l√† m√¥n th·ªÉ thao d√πng v·ª£t (<b>racket</b>)." },
            { q: "The SEA Games ______ every two years.", qVi: "SEA Games ______ m·ªói hai nƒÉm m·ªôt l·∫ßn.", key: ["every two years", "event"], opts: ["take place", "win", "last", "take part in"], optsVi: ["di·ªÖn ra", "chi·∫øn th·∫Øng", "k√©o d√†i", "tham gia"], correct: 0, exp: "S·ª± ki·ªán di·ªÖn ra theo chu k·ª≥ d√πng c·ª•m t·ª´ <b>take place</b>." },
            { q: "My brother is very ______. He plays football, basketball, and goes swimming every day.", qVi: "Anh trai t√¥i r·∫•t ______. Anh ·∫•y ch∆°i b√≥ng ƒë√°, b√≥ng r·ªï v√† ƒëi b∆°i m·ªói ng√†y.", key: ["plays football", "every day"], opts: ["loser", "champion", "sporty", "equipment"], optsVi: ["ng∆∞·ªùi thua cu·ªôc", "nh√† v√¥ ƒë·ªãch", "y√™u th·ªÉ thao", "thi·∫øt b·ªã"], correct: 2, exp: "Ng∆∞·ªùi ch∆°i nhi·ªÅu m√¥n th·ªÉ thao g·ªçi l√† ng∆∞·ªùi <b>sporty</b> (ƒëam m√™ th·ªÉ thao)." },
            { q: "You should wear ______ to protect your eyes when you go swimming.", qVi: "B·∫°n n√™n ƒëeo ______ ƒë·ªÉ b·∫£o v·ªá m·∫Øt khi ƒëi b∆°i.", key: ["protect eyes", "swimming"], opts: ["shoes", "goggles", "rackets", "boats"], optsVi: ["gi√†y", "k√≠nh b∆°i", "v·ª£t", "thuy·ªÅn"], correct: 1, exp: "K√≠nh d√πng khi ƒëi b∆°i l√† <b>goggles</b>." },
            { q: "In ______, two teams pull a rope as hard as they can.", qVi: "Trong tr√≤ ______, hai ƒë·ªôi k√©o m·ªôt s·ª£i d√¢y m·∫°nh nh·∫•t c√≥ th·ªÉ.", key: ["pull a rope", "two teams"], opts: ["blind man's bluff", "tug of war", "skipping", "wrestling"], optsVi: ["b·ªãt m·∫Øt b·∫Øt d√™", "k√©o co", "nh·∫£y d√¢y", "ƒë·∫•u v·∫≠t"], correct: 1, exp: "Tr√≤ ch∆°i k√©o d√¢y l√† <b>tug of war</b> (k√©o co)." },
            { q: "The Olympic ______ was very happy when he received the gold medal.", qVi: "Nh√† ______ Olympic r·∫•t h·∫°nh ph√∫c khi nh·∫≠n huy ch∆∞∆°ng v√†ng.", key: ["Olympic", "gold medal"], opts: ["loser", "player", "champion", "sport star"], optsVi: ["ng∆∞·ªùi thua", "ng∆∞·ªùi ch∆°i", "nh√† v√¥ ƒë·ªãch", "ng√¥i sao th·ªÉ thao"], correct: 2, exp: "Ng∆∞·ªùi nh·∫≠n huy ch∆∞∆°ng v√†ng l√† <b>champion</b> (nh√† v√¥ ƒë·ªãch)." },
            { q: "We often go to the ______ to do exercise and lift weights.", qVi: "Ch√∫ng t√¥i th∆∞·ªùng ƒë·∫øn ______ ƒë·ªÉ t·∫≠p th·ªÉ d·ª•c v√† n√¢ng t·∫°.", key: ["do exercise", "lift weights"], opts: ["stadium", "playground", "gym", "boat"], optsVi: ["s√¢n v·∫≠n ƒë·ªông", "s√¢n ch∆°i", "ph√≤ng gym", "thuy·ªÅn"], correct: 2, exp: "N∆°i t·∫≠p th·ªÉ h√¨nh v√† n√¢ng t·∫° l√† <b>gym</b>." },
            { q: "How long does a football match ______? ‚Äì Usually 90 minutes.", qVi: "M·ªôt tr·∫≠n b√≥ng ƒë√° ______ bao l√¢u? ‚Äì Th∆∞·ªùng l√† 90 ph√∫t.", key: ["How long", "90 minutes"], opts: ["take place", "last", "win", "take part in"], optsVi: ["di·ªÖn ra", "k√©o d√†i", "th·∫Øng", "tham gia"], correct: 1, exp: "H·ªèi v·ªÅ kho·∫£ng th·ªùi gian k√©o d√†i c·ªßa s·ª± ki·ªán d√πng ƒë·ªông t·ª´ <b>last</b>." },
            { q: "My grandfather and his friends often play ______ in the park. It‚Äôs a quiet game for two people.", qVi: "√îng t√¥i th∆∞·ªùng ch∆°i ______ trong c√¥ng vi√™n. ƒê√≥ l√† tr√≤ ch∆°i y√™n tƒ©nh cho hai ng∆∞·ªùi.", key: ["quiet game", "two people"], opts: ["volleyball", "chess", "karate", "aerobics"], optsVi: ["b√≥ng chuy·ªÅn", "c·ªù vua/t∆∞·ªõng", "v√µ karate", "th·ªÉ d·ª•c nh·ªãp ƒëi·ªáu"], correct: 1, exp: "Tr√≤ ch∆°i tr√≠ tu·ªá, y√™n tƒ©nh cho 2 ng∆∞·ªùi l√† <b>chess</b> (c·ªù)." },
            { q: "To go fishing, you often need a ______ to go out on the lake.", qVi: "ƒê·ªÉ ƒëi c√¢u c√°, b·∫°n th∆∞·ªùng c·∫ßn m·ªôt ______ ƒë·ªÉ ra gi·ªØa h·ªì.", key: ["go fishing", "on the lake"], opts: ["bicycle", "racket", "boat", "ball"], optsVi: ["xe ƒë·∫°p", "v·ª£t", "chi·∫øc thuy·ªÅn", "b√≥ng"], correct: 2, exp: "ƒê·ªÉ ra gi·ªØa h·ªì c√¢u c√° c·∫ßn d√πng <b>boat</b> (thuy·ªÅn)." },
            { q: "Thousands of people went to the ______ to watch the final match.", qVi: "H√†ng ng√†n ng∆∞·ªùi ƒë√£ ƒë·∫øn ______ ƒë·ªÉ xem tr·∫≠n chung k·∫øt.", key: ["watch match", "thousands people"], opts: ["gym", "stadium", "playground", "competition"], optsVi: ["ph√≤ng gym", "s√¢n v·∫≠n ƒë·ªông", "s√¢n ch∆°i", "cu·ªôc thi"], correct: 1, exp: "N∆°i l·ªõn ƒë·ªÉ xem thi ƒë·∫•u th·ªÉ thao l√† <b>stadium</b> (s√¢n v·∫≠n ƒë·ªông)." },
            { q: "______! You played a great game today.", qVi: "______! B·∫°n ƒë√£ ch∆°i r·∫•t hay h√¥m nay.", key: ["great game", "exclamation"], opts: ["Sporty", "Winner", "Congratulations", "Champion"], optsVi: ["Y√™u th·ªÉ thao", "Ng∆∞·ªùi th·∫Øng", "Ch√∫c m·ª´ng", "Nh√† v√¥ ƒë·ªãch"], correct: 2, exp: "L·ªùi ch√∫c m·ª´ng khi ai ƒë√≥ l√†m t·ªët l√† <b>Congratulations</b>." },
            { q: "In a ______, there is always a winner and a ______.", qVi: "Trong m·ªôt ______, lu√¥n c√≥ ng∆∞·ªùi th·∫Øng v√† ______.", key: ["winner", "opposite"], opts: ["game / player", "competition / loser", "stadium / champion", "sport star / winner"], optsVi: ["tr√≤ ch∆°i / ng∆∞·ªùi ch∆°i", "cu·ªôc thi / ng∆∞·ªùi thua", "s√¢n / v√¥ ƒë·ªãch", "sao / ng∆∞·ªùi th·∫Øng"], correct: 1, exp: "Trong cu·ªôc thi (<b>competition</b>) c√≥ ng∆∞·ªùi th·∫Øng v√† ng∆∞·ªùi thua (<b>loser</b>)." },
            { q: "My sister does ______ every morning to keep fit and stay healthy.", qVi: "Ch·ªã t√¥i t·∫≠p ______ m·ªói s√°ng ƒë·ªÉ gi·ªØ d√°ng v√† kh·ªèe m·∫°nh.", key: ["keep fit", "does"], opts: ["aerobics", "wrestling", "marathon", "football"], optsVi: ["th·ªÉ d·ª•c nh·ªãp ƒëi·ªáu", "ƒë·∫•u v·∫≠t", "ch·∫°y marathon", "b√≥ng ƒë√°"], correct: 0, exp: "C·ª•m t·ª´ 'do aerobics' (t·∫≠p th·ªÉ d·ª•c nh·ªãp ƒëi·ªáu). C√°c m√¥n kh√°c d√πng 'play' ho·∫∑c 'go'." },
            { q: "You should wear a pair of good ______ when you go running or playing sports.", qVi: "B·∫°n n√™n mang m·ªôt ƒë√¥i ______ t·ªët khi ch·∫°y b·ªô ho·∫∑c ch∆°i th·ªÉ thao.", key: ["running", "wear pair"], opts: ["goggles", "shoes", "bicycles", "equipment"], optsVi: ["k√≠nh b∆°i", "gi√†y", "xe ƒë·∫°p", "thi·∫øt b·ªã"], correct: 1, exp: "Ch·∫°y b·ªô c·∫ßn mang <b>shoes</b> (gi√†y)." },
            { q: "Do you want to ______ the school's table tennis competition?", qVi: "B·∫°n c√≥ mu·ªën ______ cu·ªôc thi b√≥ng b√†n c·ªßa tr∆∞·ªùng kh√¥ng?", key: ["competition", "join"], opts: ["take part in", "last", "win", "take place"], optsVi: ["tham gia", "k√©o d√†i", "th·∫Øng", "di·ªÖn ra"], correct: 0, exp: "Tham gia v√†o m·ªôt cu·ªôc thi l√† <b>take part in</b>." },
            { q: "Pel√© is a famous ______; everyone in the world knows him.", qVi: "Pel√© l√† m·ªôt ______ n·ªïi ti·∫øng; m·ªçi ng∆∞·ªùi tr√™n th·∫ø gi·ªõi ƒë·ªÅu bi·∫øt √¥ng ·∫•y.", key: ["Pel√©", "famous"], opts: ["player", "sport star", "loser", "equipment"], optsVi: ["ng∆∞·ªùi ch∆°i", "ng√¥i sao th·ªÉ thao", "ng∆∞·ªùi thua", "thi·∫øt b·ªã"], correct: 1, exp: "Pel√© l√† huy·ªÅn tho·∫°i, ƒë∆∞·ª£c g·ªçi l√† <b>sport star</b>." },
            { q: "I often go ______ with my father on weekends. We use a rod and some bait.", qVi: "T√¥i th∆∞·ªùng ƒëi ______ v·ªõi b·ªë v√†o cu·ªëi tu·∫ßn. Ch√∫ng t√¥i d√πng c·∫ßn c√¢u v√† m·ªìi.", key: ["rod", "bait"], opts: ["cycling", "skipping", "fishing", "swimming"], optsVi: ["ƒë·∫°p xe", "nh·∫£y d√¢y", "c√¢u c√°", "b∆°i"], correct: 2, exp: "D√πng c·∫ßn (rod) v√† m·ªìi (bait) l√† ƒëi <b>fishing</b> (c√¢u c√°)." },
            { q: "My favorite indoor ______ is hide-and-seek, but I also like ______. ", qVi: "Tr√≤ ch∆°i trong nh√† y√™u th√≠ch c·ªßa t√¥i l√† tr·ªën t√¨m, nh∆∞ng t√¥i c≈©ng th√≠ch ______.", key: ["hide-and-seek", "indoor"], opts: ["sport / karate", "game / blind man's bluff", "competition / marathon", "stadium / gym"], optsVi: ["th·ªÉ thao/karate", "tr√≤ ch∆°i/b·ªãt m·∫Øt b·∫Øt d√™", "cu·ªôc thi/marathon", "s√¢n/gym"], correct: 1, exp: "Tr·ªën t√¨m l√† m·ªôt tr√≤ ch∆°i (<b>game</b>), t∆∞∆°ng t·ª± l√† b·ªãt m·∫Øt b·∫Øt d√™ (<b>blind man's bluff</b>)." },
            { q: "You need a net and a ______ to play volleyball.", qVi: "B·∫°n c·∫ßn m·ªôt c√°i l∆∞·ªõi v√† m·ªôt ______ ƒë·ªÉ ch∆°i b√≥ng chuy·ªÅn.", key: ["volleyball", "net"], opts: ["ball", "racket", "goggles", "boat"], optsVi: ["qu·∫£ b√≥ng", "v·ª£t", "k√≠nh", "thuy·ªÅn"], correct: 0, exp: "B√≥ng chuy·ªÅn c·∫ßn l∆∞·ªõi v√† <b>ball</b> (b√≥ng)." },
            
            // PART 2 (C√¢u 21-40)
            { q: "You need two ______ and a small plastic ball to play table tennis.", qVi: "B·∫°n c·∫ßn hai ______ v√† m·ªôt qu·∫£ b√≥ng nh·ª±a nh·ªè ƒë·ªÉ ch∆°i b√≥ng b√†n.", key: ["table tennis", "two items"], opts: ["shoes", "rackets", "goggles", "bicycles"], optsVi: ["gi√†y", "v·ª£t", "k√≠nh", "xe ƒë·∫°p"], correct: 1, exp: "B√≥ng b√†n d√πng v·ª£t (<b>rackets</b>)." },
            { q: "A ______ is a long-distance running race of about 42 kilometres.", qVi: "M·ªôt ______ l√† cu·ªôc ƒëua ch·∫°y ƒë∆∞·ªùng d√†i kho·∫£ng 42 km.", key: ["42 kilometres", "running race"], opts: ["marathon", "cycling", "wrestling", "skipping"], optsVi: ["cu·ªôc ƒëua marathon", "ƒë·∫°p xe", "ƒë·∫•u v·∫≠t", "nh·∫£y d√¢y"], correct: 0, exp: "Cu·ªôc ch·∫°y ƒëua 42km g·ªçi l√† <b>marathon</b>." },
            { q: "What ______ is the football match on? ‚Äì It's on Channel 3.", qVi: "Tr·∫≠n b√≥ng ƒë√° chi·∫øu tr√™n ______ n√†o? ‚Äì N√≥ chi·∫øu tr√™n K√™nh 3.", key: ["Channel 3", "match on"], opts: ["button", "programme", "channel", "television"], optsVi: ["n√∫t b·∫•m", "ch∆∞∆°ng tr√¨nh", "k√™nh", "ti vi"], correct: 2, exp: "C√¢u tr·∫£ l·ªùi ƒë·ªÅ c·∫≠p ƒë·∫øn Channel 3, n√™n c√¢u h·ªèi h·ªèi v·ªÅ <b>channel</b> (k√™nh)." },
            { q: "My brother is a(n) ______ boy; he can play almost every sport well.", qVi: "Em trai t√¥i l√† m·ªôt c·∫≠u b√© ______; n√≥ c√≥ th·ªÉ ch∆°i gi·ªèi h·∫ßu h·∫øt m·ªçi m√¥n th·ªÉ thao.", key: ["play every sport", "boy"], opts: ["boring", "educational", "sporty", "different"], optsVi: ["nh√†m ch√°n", "gi√°o d·ª•c", "m√™ th·ªÉ thao", "kh√°c bi·ªát"], correct: 2, exp: "Gi·ªèi th·ªÉ thao l√† t√≠nh t·ª´ <b>sporty</b>." },
            { q: "Tom and Jerry is a(n) ______ film because it's made from drawings.", qVi: "Tom v√† Jerry l√† phim ______ v√¨ n√≥ ƒë∆∞·ª£c l√†m t·ª´ c√°c h√¨nh v·∫Ω.", key: ["made from drawings", "Tom and Jerry"], opts: ["wildlife", "live", "animated", "science"], optsVi: ["hoang d√£", "tr·ª±c ti·∫øp", "ho·∫°t h√¨nh", "khoa h·ªçc"], correct: 2, exp: "Phim l√†m t·ª´ tranh v·∫Ω l√† phim ho·∫°t h√¨nh (<b>animated</b>)." },
            { q: "The players were very happy to hear the ______ from their fans.", qVi: "C√°c c·∫ßu th·ªß r·∫•t vui khi nghe nh·ªØng l·ªùi ______ t·ª´ ng∆∞·ªùi h√¢m m·ªô.", key: ["happy to hear", "fans"], opts: ["equipment", "congratulations", "goggles", "characters"], optsVi: ["thi·∫øt b·ªã", "ch√∫c m·ª´ng", "k√≠nh", "nh√¢n v·∫≠t"], correct: 1, exp: "Nghe l·ªùi ch√∫c m·ª´ng (<b>congratulations</b>) t·ª´ fan." },
            { q: "I'm ______ in that science programme because it shows how the heart works.", qVi: "T√¥i ______ ch∆∞∆°ng tr√¨nh khoa h·ªçc ƒë√≥ v√¨ n√≥ ch·ªâ ra c√°ch tim ho·∫°t ƒë·ªông.", key: ["science programme", "feeling"], opts: ["interesting", "enjoy", "want", "interested"], optsVi: ["th√∫ v·ªã (t√≠nh ch·∫•t)", "th√≠ch", "mu·ªën", "th·∫•y th√∫ v·ªã (c·∫£m x√∫c)"], correct: 3, exp: "C·∫•u tr√∫c 'be interested in' (quan t√¢m/th·∫•y th√∫ v·ªã v·ªÅ c√°i g√¨)." },
            { q: "In the game of ______, you have to think hard before moving your pieces.", qVi: "Trong tr√≤ ch∆°i ______, b·∫°n ph·∫£i suy nghƒ© k·ªπ tr∆∞·ªõc khi di chuy·ªÉn qu√¢n c·ªù.", key: ["moving pieces", "think hard"], opts: ["volleyball", "karate", "chess", "aerobics"], optsVi: ["b√≥ng chuy·ªÅn", "karate", "c·ªù vua", "th·ªÉ d·ª•c"], correct: 2, exp: "Di chuy·ªÉn c√°c qu√¢n c·ªù (pieces) l√† tr√≤ <b>chess</b>." },
            { q: "This documentary is a ______ for anyone who loves nature.", qVi: "Phim t√†i li·ªáu n√†y l√† m·ªôt ______ cho b·∫•t c·ª© ai y√™u thi√™n nhi√™n.", key: ["loves nature", "documentary"], opts: ["must-see", "boring", "popular", "cute"], optsVi: ["ƒëi·ªÅu ph·∫£i xem", "ch√°n", "ph·ªï bi·∫øn", "d·ªÖ th∆∞∆°ng"], correct: 0, exp: "Danh t·ª´ gh√©p <b>must-see</b> ch·ªâ m·ªôt th·ª© r·∫•t hay, ƒë√°ng xem." },
            { q: "Before you go swimming, make sure you bring your ______ to see underwater.", qVi: "Tr∆∞·ªõc khi ƒëi b∆°i, h√£y ch·∫Øc ch·∫Øn mang theo ______ ƒë·ªÉ nh√¨n d∆∞·ªõi n∆∞·ªõc.", key: ["see underwater", "swimming"], opts: ["rackets", "goggles", "shoes", "boats"], optsVi: ["v·ª£t", "k√≠nh b∆°i", "gi√†y", "thuy·ªÅn"], correct: 1, exp: "ƒê·ªÉ nh√¨n d∆∞·ªõi n∆∞·ªõc c·∫ßn <b>goggles</b>." },
            { q: "Does this talent show ______ on Sunday night?", qVi: "Ch∆∞∆°ng tr√¨nh t√†i nƒÉng n√†y c√≥ ______ v√†o t·ªëi Ch·ªß nh·∫≠t kh√¥ng?", key: ["Sunday night", "show"], opts: ["take part in", "last", "take place", "win"], optsVi: ["tham gia", "k√©o d√†i", "di·ªÖn ra", "th·∫Øng"], correct: 2, exp: "H·ªèi v·ªÅ l·ªãch tr√¨nh di·ªÖn ra d√πng <b>take place</b>." },
            { q: "There were so many famous ______ in the studio today for the talk show.", qVi: "C√≥ r·∫•t nhi·ªÅu ______ n·ªïi ti·∫øng trong tr∆∞·ªùng quay h√¥m nay cho bu·ªïi tr√≤ chuy·ªán.", key: ["talk show", "people"], opts: ["guests", "buttons", "rackets", "equipment"], optsVi: ["kh√°ch m·ªùi", "n√∫t b·∫•m", "v·ª£t", "thi·∫øt b·ªã"], correct: 0, exp: "Ng∆∞·ªùi tham d·ª± talk show l√† <b>guests</b> (kh√°ch m·ªùi)." },
            { q: "My sister does ______ every morning at the gym to stay fit.", qVi: "Ch·ªã t√¥i t·∫≠p ______ m·ªói s√°ng t·∫°i ph√≤ng gym ƒë·ªÉ gi·ªØ d√°ng.", key: ["at the gym", "does"], opts: ["marathon", "aerobics", "wrestling", "chess"], optsVi: ["marathon", "th·ªÉ d·ª•c nh·ªãp ƒëi·ªáu", "ƒë·∫•u v·∫≠t", "c·ªù"], correct: 1, exp: "D√πng v·ªõi ƒë·ªông t·ª´ 'does' l√† <b>aerobics</b>." },
            { q: "We use the ______ to change the volume of the TV.", qVi: "Ch√∫ng ta d√πng ______ ƒë·ªÉ thay ƒë·ªïi √¢m l∆∞·ª£ng TV.", key: ["change volume", "TV"], opts: ["remote control", "playground", "bicycle", "stadium"], optsVi: ["ƒëi·ªÅu khi·ªÉn t·ª´ xa", "s√¢n ch∆°i", "xe ƒë·∫°p", "s√¢n v·∫≠n ƒë·ªông"], correct: 0, exp: "Thi·∫øt b·ªã ƒëi·ªÅu khi·ªÉn TV l√† <b>remote control</b>." },
            { q: "You shouldn't ______ too much television; it's not good for your eyes.", qVi: "B·∫°n kh√¥ng n√™n ______ ti vi qu√° nhi·ªÅu; n√≥ kh√¥ng t·ªët cho m·∫Øt.", key: ["television", "eyes"], opts: ["view", "watch", "see", "look"], optsVi: ["xem (c·∫£nh)", "xem (theo d√µi)", "nh√¨n th·∫•y", "nh√¨n"], correct: 1, exp: "Xem TV d√πng ƒë·ªông t·ª´ <b>watch</b>." },
            { q: "In the game of ______, one person covers their eyes and tries to catch others.", qVi: "Trong tr√≤ ______, m·ªôt ng∆∞·ªùi che m·∫Øt v√† c·ªë b·∫Øt nh·ªØng ng∆∞·ªùi kh√°c.", key: ["covers eyes", "catch others"], opts: ["tug of war", "blind man's bluff", "skipping", "karate"], optsVi: ["k√©o co", "b·ªãt m·∫Øt b·∫Øt d√™", "nh·∫£y d√¢y", "karate"], correct: 1, exp: "M√¥ t·∫£ c·ªßa tr√≤ <b>blind man's bluff</b> (b·ªãt m·∫Øt b·∫Øt d√™)." },
            { q: "The ______ told the audience a very funny joke.", qVi: "Ng∆∞·ªùi ______ ƒë√£ k·ªÉ cho kh√°n gi·∫£ m·ªôt c√¢u ƒë√πa r·∫•t bu·ªìn c∆∞·ªùi.", key: ["funny joke", "audience"], opts: ["character", "performer", "viewer", "sport star"], optsVi: ["nh√¢n v·∫≠t", "ng∆∞·ªùi bi·ªÉu di·ªÖn", "ng∆∞·ªùi xem", "ng√¥i sao th·ªÉ thao"], correct: 1, exp: "Ng∆∞·ªùi ƒë·ª©ng tr√™n s√¢n kh·∫•u k·ªÉ chuy·ªán vui l√† <b>performer</b> (ho·∫∑c comedian)." },
            { q: "To play ______ properly, you need a net and a ball.", qVi: "ƒê·ªÉ ch∆°i ______ ƒë√∫ng c√°ch, b·∫°n c·∫ßn l∆∞·ªõi v√† b√≥ng.", key: ["net and ball", "play"], opts: ["volleyball", "cycling", "marathon", "running"], optsVi: ["b√≥ng chuy·ªÅn", "ƒë·∫°p xe", "marathon", "ch·∫°y"], correct: 0, exp: "M√¥n c·∫ßn l∆∞·ªõi v√† b√≥ng trong danh s√°ch l√† <b>volleyball</b>." },
            { q: "This ______ programme helps children learn English through songs.", qVi: "Ch∆∞∆°ng tr√¨nh ______ n√†y gi√∫p tr·∫ª em h·ªçc ti·∫øng Anh qua b√†i h√°t.", key: ["learn English", "helps children"], opts: ["wildlife", "comedy", "educational", "sports"], optsVi: ["hoang d√£", "h√†i k·ªãch", "gi√°o d·ª•c", "th·ªÉ thao"], correct: 2, exp: "Ch∆∞∆°ng tr√¨nh d·∫°y h·ªçc l√† ch∆∞∆°ng tr√¨nh <b>educational</b> (gi√°o d·ª•c)." },
            { q: "After the match, the ______ cried because they didn't win the trophy.", qVi: "Sau tr·∫≠n ƒë·∫•u, nh·ªØng ______ ƒë√£ kh√≥c v√¨ h·ªç kh√¥ng gi√†nh ƒë∆∞·ª£c c√∫p.", key: ["didn't win", "cried"], opts: ["winners", "losers", "champions", "sport stars"], optsVi: ["ng∆∞·ªùi th·∫Øng", "ng∆∞·ªùi thua", "nh√† v√¥ ƒë·ªãch", "ng√¥i sao"], correct: 1, exp: "Ng∆∞·ªùi kh√¥ng th·∫Øng l√† <b>losers</b> (ng∆∞·ªùi thua cu·ªôc)." }
        ];

        let answeredSet = new Set();
        let correctCount = 0;
        const totalCount = quizData.length;

        function initQuiz() {
            const container = document.getElementById('quiz-container');
            const nav = document.getElementById('q-nav');
            document.getElementById('stat-total').innerText = totalCount;
            document.getElementById('final-total').innerText = totalCount;

            quizData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `q-card-${index}`;
                
                card.innerHTML = `
                    <div class="question-text">
                        Question ${index + 1}. ${item.q}
                        <div class="trans-text" id="trans-q-${index}">${item.qVi}</div>
                    </div>

                    <button class="btn-hint-toggle" onclick="toggleHint(${index})">
                        üí° G·ª£i √Ω
                    </button>
                    <div class="hint-content" id="hint-box-${index}">
                        <strong>Keywords:</strong> ${item.key.join('; ')}
                    </div>

                    <div class="options-list">
                        ${item.opts.map((opt, i) => `
                            <button class="option-btn" onclick="checkAnswer(this, ${index}, ${i})">
                                <span><b>${String.fromCharCode(65 + i)}.</b> ${opt}</span>
                                <span class="trans-text" id="trans-opt-${index}-${i}">(${item.optsVi[i]})</span>
                            </button>
                        `).join('')}
                    </div>
                    
                    <div class="explanation-box" id="exp-${index}"></div>

                    <button class="btn-trans-toggle" id="btn-trans-${index}" onclick="toggleTrans(${index})" disabled title="H√£y ch·ªçn ƒë√°p √°n tr∆∞·ªõc ƒë·ªÉ xem d·ªãch nghƒ©a">
                        üîí D·ªãch nghƒ©a
                    </button>
                `;
                container.appendChild(card);

                const qNum = document.createElement('div');
                qNum.className = 'q-num';
                qNum.id = `nav-${index}`;
                qNum.innerText = index + 1;
                qNum.onclick = () => {
                    card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    // N·∫øu ƒëang ·ªü mobile th√¨ ƒë√≥ng menu sau khi ch·ªçn c√¢u
                    if(window.innerWidth <= 768) toggleSidebar();
                };
                nav.appendChild(qNum);
            });
        }

        // --- Mobile Sidebar Toggle ---
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
            
            // Kh√≥a cu·ªôn trang ch√≠nh khi ƒëang m·ªü menu ƒë·ªÉ tr√°nh l·ªôn x·ªôn
            if(sidebar.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = 'auto';
            }
        }

        function toggleHint(index) {
            document.getElementById(`hint-box-${index}`).classList.toggle('show');
        }

        function toggleTrans(index) {
            const qTrans = document.getElementById(`trans-q-${index}`);
            const btn = document.getElementById(`btn-trans-${index}`);
            
            qTrans.classList.toggle('show');
            for (let i = 0; i < 4; i++) {
                const optTrans = document.getElementById(`trans-opt-${index}-${i}`);
                if(optTrans) optTrans.classList.toggle('show');
            }
            
            if (qTrans.classList.contains('show')) {
                btn.innerHTML = 'üåê ·∫®n d·ªãch nghƒ©a';
                btn.style.backgroundColor = '#e8f0fe';
                btn.style.color = '#1a73e8';
            } else {
                btn.innerHTML = 'üåê D·ªãch nghƒ©a';
                btn.style.backgroundColor = '#f1f3f4';
                btn.style.color = '#555';
            }
        }

        function updateStats() {
            document.getElementById('stat-correct').innerText = correctCount;
            const score = (correctCount / totalCount * 10).toFixed(1);
            document.getElementById('stat-score').innerText = score;
        }

        function checkAnswer(btn, qIndex, optIndex) {
            if (answeredSet.has(qIndex)) return;
            answeredSet.add(qIndex);

            const buttons = btn.parentElement.querySelectorAll('.option-btn');
            const correctIndex = quizData[qIndex].correct;
            const expBox = document.getElementById(`exp-${qIndex}`);
            const transBtn = document.getElementById(`btn-trans-${qIndex}`);
            const navNum = document.getElementById(`nav-${qIndex}`);

            if (transBtn.hasAttribute('disabled')) {
                transBtn.removeAttribute('disabled');
                transBtn.innerHTML = 'üåê D·ªãch nghƒ©a';
            }

            if (optIndex === correctIndex) {
                btn.classList.add('correct');
                navNum.classList.add('done-correct');
                correctCount++;
            } else {
                btn.classList.add('wrong');
                navNum.classList.add('done-wrong');
                buttons[correctIndex].classList.add('correct');
            }

            updateStats();
            buttons.forEach(b => b.classList.add('disabled'));

            const percent = (answeredSet.size / quizData.length) * 100;
            document.getElementById('progress-bar').style.width = percent + '%';

            expBox.innerHTML = `<strong>Gi·∫£i th√≠ch:</strong> ${quizData[qIndex].exp}`;
            expBox.style.display = 'block';
        }

        function submitQuiz() {
            if (window.innerWidth <= 768) {
                toggleSidebar(); // ƒê√≥ng menu n·∫øu ƒëang m·ªü
            }
            
            if (answeredSet.size < totalCount) {
                const confirmSubmit = confirm(`B·∫°n m·ªõi l√†m ${answeredSet.size}/${totalCount} c√¢u. B·∫°n c√≥ ch·∫Øc mu·ªën n·ªôp b√†i kh√¥ng?`);
                if (!confirmSubmit) return;
            }

            const score = (correctCount / totalCount * 10).toFixed(1);
            let rank = "";
            if(score >= 9) rank = "Xu·∫•t s·∫Øc (Excellent)";
            else if(score >= 8) rank = "Gi·ªèi (Good)";
            else if(score >= 6.5) rank = "Kh√° (Fair)";
            else if(score >= 5) rank = "Trung b√¨nh (Average)";
            else rank = "C·∫ßn c·ªë g·∫Øng th√™m (Poor)";

            document.getElementById('final-score').innerText = score;
            document.getElementById('final-correct').innerText = correctCount;
            document.getElementById('final-rank').innerText = rank;
            document.getElementById('result-modal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('result-modal').style.display = 'none';
        }

        window.onload = initQuiz;
    </script>
</body>
</html>
